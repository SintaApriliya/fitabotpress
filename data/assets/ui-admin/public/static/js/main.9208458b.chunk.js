(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1038:function(e,t,a){var n={"./ar.svg":1039,"./de.svg":1040,"./en.svg":1041,"./es.svg":1042,"./fr.svg":1043,"./he.svg":1044,"./hi.svg":1045,"./it.svg":1046,"./ja.svg":1047,"./ko.svg":1048,"./missing.svg":1049,"./nl.svg":1050,"./pl.svg":1051,"./pt.svg":1052,"./ru.svg":1053,"./zh.svg":1054};function r(e){var t=s(e);return a(t)}function s(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=1038},1039:function(e,t,a){e.exports=a.p+"static/media/ar.516d1901.svg"},1040:function(e,t,a){e.exports=a.p+"static/media/de.3e726c2b.svg"},1041:function(e,t,a){e.exports=a.p+"static/media/en.4f1b7af5.svg"},1042:function(e,t,a){e.exports=a.p+"static/media/es.cc1b41b0.svg"},1043:function(e,t,a){e.exports=a.p+"static/media/fr.b1156355.svg"},1044:function(e,t,a){e.exports=a.p+"static/media/he.f62b32f0.svg"},1045:function(e,t,a){e.exports=a.p+"static/media/hi.e4ab7bd0.svg"},1046:function(e,t,a){e.exports=a.p+"static/media/it.8d15de04.svg"},1047:function(e,t,a){e.exports=a.p+"static/media/ja.8608025c.svg"},1048:function(e,t,a){e.exports=a.p+"static/media/ko.6d3d963f.svg"},1049:function(e,t,a){e.exports=a.p+"static/media/missing.068a3f6b.svg"},1050:function(e,t,a){e.exports=a.p+"static/media/nl.c5faaf5a.svg"},1051:function(e,t,a){e.exports=a.p+"static/media/pl.1f9d98ad.svg"},1052:function(e,t,a){e.exports=a.p+"static/media/pt.284babb6.svg"},1053:function(e,t,a){e.exports=a.p+"static/media/ru.7a8b3a7d.svg"},1054:function(e,t,a){e.exports=a.p+"static/media/zh.02c229de.svg"},1199:function(e,t,a){"use strict";a.r(t);a(607),a(608),a(781);var n=a(1),r=a.n(n),s=a(37),o=a.n(s),c=(a(786),a(1225)),i=a(20),l=a(1230),u=a(1224),d=a(1228),m=a(166),p=a(1202),f=a(1203),h=a(1204),g=a(1205),A=a(1206),b=a(533),E=a.n(b),v=function(e){return r.a.createElement("div",{className:"centered-container"},r.a.createElement("div",{className:"middle"},r.a.createElement("div",{className:"inner"},r.a.createElement("img",{className:"logo",src:E.a,alt:"loading"}),r.a.createElement(p.a,{body:!0},r.a.createElement(f.a,{className:"login-box"},r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement("strong",null,e.title||"Botpress")),r.a.createElement(g.a,null,e.subtitle||""),e.error&&r.a.createElement(A.a,{color:"danger"},e.error),e.children))),e.poweredBy&&r.a.createElement("div",{className:"homepage"},r.a.createElement("p",null,"Powered by ",r.a.createElement("a",{href:"https://botpress.com"},"Botpress"))))))},w=function(e){var t=e.location.state&&e.location.state.error;return t?r.a.createElement(v,{title:"Authentication failed"},r.a.createElement("p",null,t)):(setTimeout(function(){window.close()},1e3),r.a.createElement(v,{title:"Authentication"},r.a.createElement("p",null,"Successfully authenticated. You can close this window.")))},y=a(116),O=a(4),k=a.n(O),C=a(7),x=a(12),R=a(40),I=a(41),S=a(46),N=a(45),T=a(47),j=a(107),D=a(534),B=a(332),P=a.n(B),L=a(69),F=a(1208),M=a(1209),U=a(1210),H=a(1211),V=a(1227),q=a(1212),Q=a(1213),Z=a(1214),z=a(11),Y=a.n(z),W=a(192),G=a.n(W),K=a(245),X=a.n(K),J=a(59),_=a(128),$=function(e){return c.E.create({className:"recipe-toaster",position:J.a.TOP_RIGHT}).show({message:e,intent:_.a.SUCCESS,timeout:1e3})},ee=function(e){return c.E.create({className:"recipe-toaster",position:J.a.TOP_RIGHT}).show({message:e,intent:_.a.DANGER,timeout:3e3})},te=function(e){return c.E.create({className:"recipe-toaster",position:J.a.TOP_RIGHT}).show({message:e,intent:_.a.PRIMARY,timeout:1e3})},ae=a(126),ne=a.n(ae),re=a(169),se=a(537),oe=a.n(se),ce=function(e){e.location=Object.assign(e.location,{query:oe.a.parse(e.location.search)})},ie=Object(re.a)({basename:"".concat(window.ROOT_PATH,"/admin")});ce(ie),ie.listen(function(){return ce(ie)});var le=ie,ue="bp/token",de="bp/workspace",me="bp/chat_user_auth",pe="/home";function fe(){var e=localStorage.getItem(ue);return e&&JSON.parse(e)||{token:null,expires:0}}function he(e){e?localStorage.setItem(de,e):localStorage.removeItem(de)}function ge(){return localStorage.getItem(de)}function Ae(e){e?localStorage.setItem(me,JSON.stringify(e)):localStorage.removeItem(me)}function be(){try{return JSON.parse(localStorage.getItem(me)||"")}catch(e){return}}function Ee(){localStorage.removeItem(ue),window.location.href=window.location.origin+window.ROOT_PATH}var ve=function(){function e(){var t=this;Object(R.a)(this,e),this.login=function(){var e=Object(C.a)(k.a.mark(function e(a,n,r){var s,o,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isAuthenticated()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Oe.getAnonymous({toastErrors:!1}).post("/auth"+n,a,{timeout:15e3});case 4:return s=e.sent,o=s.data,c=o.payload.token,t.setSession({expiresIn:7200,idToken:c}),e.next=10,t.afterLoginRedirect(r);case 10:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),this.afterLoginRedirect=function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n,r,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=be())){e.next=17;break}return e.prev=2,e.next=5,Oe.getSecured().post("/auth/me/chatAuth",a);case 5:return n=e.sent,he(n.data),e.abrupt("return",le.replace("/chatAuthResult"));case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",le.replace({pathname:"/chatAuthResult",state:{error:e.t0.message}}));case 14:return e.prev=14,Ae(void 0),e.finish(14);case 17:return e.next=19,Oe.getSecured().get("/auth/me/workspaces");case 19:if(r=e.sent,(s=r.data)&&s.length){e.next=23;break}return e.abrupt("return",le.replace("/noAccess"));case 23:he(ge()||s[0].workspace),le.replace(t||pe);case 25:case"end":return e.stop()}},e,null,[[2,11,14,17]])}));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(C.a)(k.a.mark(function e(a,n){var r,s,o,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.email,s=a.password,!t.isAuthenticated()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Oe.getAnonymous({toastErrors:!1}).post("/auth"+n,{email:r,password:s});case 5:return o=e.sent,c=o.data,t.setSession({expiresIn:7200,idToken:c.payload.token}),e.next=10,t.afterLoginRedirect();case 10:le.replace(pe);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),this.logout=function(){Ee()}}return Object(I.a)(e,[{key:"setSession",value:function(e){var t=e.expiresIn;!function(e,t){var a=JSON.stringify({token:e,expires:t||Date.now()+ne()("4h"),time:new Date});localStorage.setItem(ue,a)}(e.idToken,JSON.stringify(1e3*(t||7200)+(new Date).getTime()))}},{key:"parseJwt",value:function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}},{key:"isAuthenticated",value:function(){var e=fe(),t=e.token,a=e.expires;return t&&(new Date).getTime()<a}}]),e}(),we=function(e,t){var a=G.a.create(Object(x.a)({timeout:6e3},e));return a.interceptors.response.use(function(e){return e},function(e){var t=Y.a.get(e,"response.data"),a=Y.a.get(t,"errorCode");return a?["BP_0041"].includes(a)?Ee():X.a.reject(t):X.a.reject(e)}),t.toastErrors&&a.interceptors.response.use(function(e){return e},function(e){return function(e){var t=Y.a.get(e,"response.data.errorCode")||Y.a.get(e,"errorCode"),a=Y.a.get(e,"response.data.message")||Y.a.get(e,"message"),n=Y.a.get(e,"response.data.docs")||Y.a.get(e,"docs"),s=r.a.createElement("span",null,t&&r.a.createElement("span",null,"[",t,"]")," ",a," ",n&&r.a.createElement("a",{href:n,target:"_blank"},"More information"));t||s||(s=r.a.createElement("span",null,"Something wrong happened. Please try again later.")),ee(s)}(e),X.a.reject(e)}),a},ye=Object({NODE_ENV:"production",PUBLIC_URL:"admin"}).REACT_APP_API_URL?{baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"admin"}).REACT_APP_API_URL,"/api/v1")}:{baseURL:"".concat(window.ROOT_PATH,"/api/v1")},Oe={getApiPath:function(){return ye.baseURL},getSecured:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.token,a=void 0===t?void 0:t,n=e.toastErrors,r=void 0===n||n,s=e.timeout,o=void 0===s?1e4:s;if(!a){var c=fe();a=c&&c.token}return we(Object(x.a)({timeout:o,headers:{Authorization:"Bearer ".concat(a),"X-BP-Workspace":ge()}},ye),{toastErrors:r})},getAnonymous:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toastErrors;return we(ye,{toastErrors:void 0===e||e})}},ke={bots:void 0,health:void 0,loadingBots:!1,botTemplates:[],botTemplatesFetched:!1,botCategories:[],botCategoriesFetched:!1},Ce=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/bots/categories");case 2:a=e.sent,n=a.data,t({type:"bots/RECEIVED_BOT_CATEGORIES",categories:n.payload.categories});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},xe=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"bots/FETCH_BOTS_REQUESTED"}),e.next=3,Oe.getSecured().get("/admin/bots");case 3:if(a=e.sent,(n=a.data)&&n.payload){e.next=7;break}return e.abrupt("return");case 7:t({type:"bots/FETCH_BOTS_RECEIVED",bots:n.payload.bots,workspace:n.payload.workspace});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Re=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/bots/health");case 2:if(a=e.sent,(n=a.data)&&n.payload){e.next=6;break}return e.abrupt("return");case 6:t({type:"bots/FETCH_BOT_STATUS_RECEIVED",health:n.payload});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Ie=a(73),Se=a(119);a(1035);Se.initializeApp({apiKey:"AIzaSyBorvBTBW8GbNjJSmhqLbJsu-SvzqTx5OY",authDomain:"botpress-licensing.firebaseapp.com",databaseURL:"https://botpress-licensing.firebaseio.com",projectId:"botpress-licensing",storageBucket:"",messagingSenderId:"355555448753"});var Ne={licensing:null,keys:null,products:null,fetchingKeys:!1,fetchingProducts:!1,licensingAccount:null},Te=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured({toastErrors:!1}).get("admin/license/status");case 2:a=e.sent,n=a.data,t({type:"license/FETCH_LICENSING_RECEIVED",licensing:n.payload});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},je={languages:null,workspaces:null,serverConfig:null,serverConfigLoaded:!1},De=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/server/serverConfig");case 2:a=e.sent,n=a.data,t({type:"server/FETCH_FEATURE_RECEIVED",serverConfig:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Be=a(491),Pe=a(5),Le=a.n(Pe),Fe=a(538),Me=a(129),Ue=a(539),He={modules:[]},Ve=a(38),qe=a.n(Ve),Qe={stats:null,lastDate:null,loading:!0,loadingIncidents:!0},Ze={roles:[],loading:!1},ze=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t,a){var n,r,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a(),!n.roles.loading){e.next=3;break}return e.abrupt("return");case 3:return t({type:"roles/FETCH_ROLES_REQUESTED"}),e.next=6,Oe.getSecured().get("/admin/roles");case 6:r=e.sent,s=r.data,t({type:"roles/FETCH_ROLES_RECEIVED",roles:s.payload.roles});case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},Ye={users:void 0,loading:!1,loadingUsers:!1,profile:void 0,permissions:void 0,workspaces:void 0,authConfig:void 0,currentWorkspace:void 0},We=function(e){return function(){var t=Object(C.a)(k.a.mark(function t(a,n){var r,s,o,c;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),!r.user.loadingUsers){t.next=3;break}return t.abrupt("return");case 3:return a({type:"user/FETCH_USERS_REQUESTED"}),s=e&&"?roles=".concat(e)||"",t.next=7,Oe.getSecured().get("/admin/users".concat(s));case 7:o=t.sent,c=o.data,a({type:"user/FETCH_USERS_RECEIVED",users:c.payload});case 10:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},Ge=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"user/MY_PROFILE_REQUESTED"}),e.prev=1,e.next=4,Oe.getSecured().get("/auth/me/profile");case 4:a=e.sent,n=a.data,t({type:"user/MY_PROFILE_RECEIVED",profile:n.payload}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Ee();case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},Ke=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/auth/me/workspaces");case 2:a=e.sent,n=a.data,t({type:"user/MY_WORKSPACES_RECEIVED",workspaces:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Xe=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getAnonymous().get("/auth/config");case 2:a=e.sent,n=a.data,t({type:"user/AUTH_CONFIG_RECEIVED",authConfig:n.payload.strategies});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Je=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.a.get("/version",{baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"admin"}).REACT_APP_API_URL});case 3:a=e.sent,n=a.data,t({type:"version/RECEIVE_CURRENT_VERSION",payload:{version:n}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("could not fetch current version");case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},_e=function(){return function(){var e=Object(C.a)(k.a.mark(function e(t,a){var n,r,s,o,c,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===a().version.latestReleases.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,G.a.get("https://api.github.com/repos/botpress/botpress/releases");case 5:return n=e.sent,r=n.data,s=Y.a.take(r,5).map(function(e){return{version:e.name.startsWith("v")?e.name.slice(1):e.name,details:e.body,githubUrl:e.html_url,releaseDate:e.created_at,daysAgo:qe()(e.created_at).fromNow(),dockerUrl:""}}),e.prev=8,e.next=11,Oe.getSecured().get("/admin/docker_images");case 11:o=e.sent,c=o.data,i=c.results.map(function(e){return{name:e.name,version:e.name.slice(1).replace(/_/g,"."),hash:e.images[0].digest.replace(/\:/g,"-")}}),s.forEach(function(e){var t=i.find(function(t){return t.version===e.version});t&&(e.dockerUrl="https://hub.docker.com/layers/botpress/server/".concat(t.name,"/images/").concat(t.hash))}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.error("could not fetch docker image information",e.t0);case 20:t({type:"version/RECEIVE_LATEST_RELEASES",payload:{releases:s}}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(2),console.error("could not fetch current version");case 26:case"end":return e.stop()}},e,null,[[2,23],[8,17]])}));return function(t,a){return e.apply(this,arguments)}}()},$e={currentVersion:"",latestReleases:[]},et=Object(Me.c)({routing:m.c,license:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"license/LICENSE_KEY_UPDATED":var a=e.keys.findIndex(function(e){return e.stripeSubscriptionId===t.license.stripeSubscriptionId});return Object(x.a)({},e,{keys:[].concat(Object(Ie.a)(e.keys.slice(0,a)),[t.license],Object(Ie.a)(e.keys.slice(a+1)))});case"license/LOGOUT_USER_FROM_LICENSE_SERVER":return Object(x.a)({},Ne);case"license/FETCH_LICENSING_RECEIVED":return Object(x.a)({},e,{licensing:t.licensing});case"license/FETCH_KEYS_REQUESTED":return Object(x.a)({},e,{fetchingKeys:!0});case"license/FETCH_KEYS_RECEIVED":return Object(x.a)({},e,{keys:t.keys,fetchingKeys:!1});case"license/UPDATE_LICENSING_ACCOUNT":return Object(x.a)({},e,{licensingAccount:t.account});case"license/FETCH_PRODUCTS_REQUESTED":return Object(x.a)({},e,{fetchingProducts:!0});case"license/FETCH_PRODUCTS_RECEIVED":return Object(x.a)({},e,{products:t.products,fetchingProducts:!1});default:return e}},bots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"bots/RECEIVED_BOT_CATEGORIES":return Object(x.a)({},e,{botCategories:t.categories||[],botCategoriesFetched:!0});case"bots/RECEIVED_BOT_TEMPLATES":return Object(x.a)({},e,{botTemplates:t.templates||[],botTemplatesFetched:!0});case"bots/FETCH_BOTS_REQUESTED":return Object(x.a)({},e,{loadingBots:!0});case"bots/FETCH_BOTS_RECEIVED":return Object(x.a)({},e,{loadingBots:!1,bots:t.bots,workspace:t.workspace});case"bots/FETCH_BOT_STATUS_RECEIVED":return Object(x.a)({},e,{health:t.health});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user/MY_PROFILE_REQUESTED":return Object(x.a)({},e,{loading:!0});case"user/FETCH_USERS_REQUESTED":return Object(x.a)({},e,{loadingUsers:!0});case"user/MY_PROFILE_RECEIVED":return Object(x.a)({},e,{loading:!1,profile:t.profile,permissions:t.profile.permissions});case"user/FETCH_USERS_RECEIVED":return Object(x.a)({},e,{loadingUsers:!1,users:t.users});case"user/MY_WORKSPACES_RECEIVED":return Object(x.a)({},e,{workspaces:t.workspaces});case"user/AUTH_CONFIG_RECEIVED":return Object(x.a)({},e,{authConfig:t.authConfig});case"user/CURRENT_WORKSPACE_CHANGED":return Object(x.a)({},e,{currentWorkspace:t.currentWorkspace});case"user/AVAILABLE_USERS_RECEIVED":return Object(x.a)({},e,{availableUsers:t.availableUsers});case"user/WORKSPACE_ROLLOUT_RECEIVED":return Object(x.a)({},e,{workspaceRollout:t.rollout});default:return e}},roles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"roles/FETCH_ROLES_REQUESTED":return Object(x.a)({},e,{loading:!0});case"roles/FETCH_ROLES_RECEIVED":return Object(x.a)({},e,{loading:!1,roles:t.roles});default:return e}},monitoring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"monitoring/FETCH_STATS_FULL_RECEIVED":return Object(x.a)({},e,{stats:t.stats,lastDate:t.toTime,loading:!1});case"bots/FETCH_STATS_PARTIAL_RECEIVED":return Object(x.a)({},e,{stats:[].concat(Object(Ie.a)(e.stats||[]),Object(Ie.a)(t.stats)),lastDate:t.toTime});case"monitoring/FETCH_STATS_FULL_REQUESTED":return Object(x.a)({},e,{loading:!0});case"bots/FETCH_INCIDENTS_RECEIVED":return Object(x.a)({},e,{incidents:t.data,loadingIncidents:!1});case"bots/FETCH_INCIDENTS_REQUESTED":return Object(x.a)({},e,{loadingIncidents:!0});default:return e}},modules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"bots/FETCH_MODULES_RECEIVED":return Object(x.a)({},e,{modules:t.modules});default:return e}},server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"server/FETCH_LANGUAGES_RECEIVED":return Object(x.a)({},e,{languages:t.languages});case"server/FETCH_WORKSPACES_RECEIVED":return Object(x.a)({},e,{workspaces:t.workspaces});case"server/FETCH_FEATURE_RECEIVED":return Object(x.a)({},e,{serverConfig:t.serverConfig,serverConfigLoaded:!0});default:return e}},version:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"version/RECEIVE_LATEST_RELEASES":return Object(x.a)({},e,{latestReleases:t.payload.releases});case"version/RECEIVE_CURRENT_VERSION":return Object(x.a)({},e,{currentVersion:t.payload.version});default:return e}}}),tt=[Ue.a,Object(m.b)(le)],at=Me.d.apply(void 0,[Me.a.apply(void 0,tt)].concat([])),nt=Object(Me.e)(et,{},at),rt=function(e){var t=nt.getState().user.profile;return!!t&&(!!t.isSuperAdmin||!e.superAdmin&&(!e.operation||!e.resource||!(t.permissions&&!Object(Fe.checkRule)(t.permissions,e.operation,e.resource))))},st=function(){var e=nt.getState().user.permissions;return e&&!!e.find(function(e){return e.res.startsWith("user.bots")})},ot=Object(i.b)(function(e){return{permissions:e.user.permissions}},void 0)(function(e){var t=e.resource,a=e.operation,n=e.superAdmin,r=e.children,s=e.fallback,o=void 0===s?null:s;return rt({resource:t,operation:a,superAdmin:n})?r:o}),ct=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"bp-sa-title"},r.a.createElement("span",null,e.title||""),e.helpText&&r.a.createElement(c.F,{content:e.helpText},r.a.createElement(c.l,{icon:"info-sign",color:Be.a.LIGHT_GRAY1}))),r.a.createElement("div",{className:"bp-sa-overflow"},r.a.createElement("div",{className:Le()("bp-sa-content",{"bp-sa-fullwidth":e.fullWidth},e.contentClassName)},r.a.createElement(ot,{superAdmin:e.superAdmin,fallback:r.a.createElement(c.d,{intent:_.a.DANGER},"This page is restricted to Super Admins")},e.children))))},it=function(e){return r.a.createElement("div",{className:"sticky-action-bar"},r.a.createElement("div",{className:"sticky-action-bar--content"},e.children))},lt=a(3),ut=function(e){var t=function(){mt(),e.decline&&e.decline(),e.resolve(!1)};return r.a.createElement(c.h,{title:e.title,icon:"warning-sign",usePortal:!1,isOpen:!0,onClose:t,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("div",{className:lt.a.DIALOG_BODY},e.message),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"confirm-dialog-decline",type:"button",onClick:t,text:e.declineLabel,tabIndex:2,intent:_.a.NONE}),r.a.createElement(c.b,{id:"confirm-dialog-accept",type:"button",onClick:function(){mt(),e.accept&&e.accept(),e.resolve(!0)},text:e.acceptLabel,tabIndex:3,intent:_.a.PRIMARY}))))};ut.defaultProps={title:"Confirmation Needed",acceptLabel:"OK",declineLabel:"Cancel",accept:function(){},decline:function(){}};var dt=function(e,t){return new Promise(function(a,n){!function(e,t){var a=document.getElementsByTagName("body")[0],n=document.createElement("div");n.setAttribute("id","confirmDialog-container"),a.appendChild(n),o.a.render(r.a.createElement(ut,Object.assign({},e,{resolve:t})),n)}(Object(x.a)({message:e},t),a)})};function mt(){var e=document.getElementById("confirmDialog-container");document.getElementsByTagName("body")[0].removeChild(e)}var pt=[{label:"Published",value:"public"},{label:"Collaborators Only",value:"private"},{label:"Unmounted",value:"disabled"}],ft=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(s)))).initialFormState={name:"",description:"",privacyPolicy:"",avatarUrl:"",coverPictureUrl:"",category:void 0,website:"",phoneNumber:"",termsConditions:"",emailAddress:""},a.state=Object(x.a)({id:""},a.initialFormState,{error:void 0,categories:[],moreOpen:!1,languages:[],defaultLanguage:void 0,isSaving:!1}),a.prepareCategories=function(){a.props.botCategories&&a.setState({categories:a.props.botCategories.map(function(e){return{label:e,value:e}})})},a.updateLanguages=function(){if(a.props.languages){var e=Y.a.sortBy(a.props.languages,"name").map(function(e){return{label:e.name,value:e.code}});a.setState({languagesList:e,selectedLanguages:e.filter(function(e){return(a.state.languages||[]).includes(e.value)}),selectedDefaultLang:e.find(function(e){return e.value===a.state.defaultLanguage})})}},a.cancel=Object(C.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={name:a.state.name,description:a.state.description,website:a.state.website,phoneNumber:a.state.phoneNumber,termsConditions:a.state.termsConditions,privacyPolicy:a.state.privacyPolicy,emailAddress:a.state.emailAddress,status:a.state.status,category:a.state.category,avatarUrl:a.state.avatarUrl,coverPictureUrl:a.state.coverPictureUrl,selectedLanguages:a.state.selectedLanguages.map(function(e){return e.value}),selectedDefaultLang:a.state.selectedDefaultLang.value},e.t0=JSON.stringify(a.initialFormState)!==JSON.stringify(t),!e.t0){e.next=6;break}return e.next=5,dt("There are unsaved changes in this form. Are you sure you want to cancel?",{acceptLabel:"Cancel",declineLabel:"Continue editing"});case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return");case 8:a.backToList();case 9:case"end":return e.stop()}},e)})),a.backToList=function(){a.props.history.push("/workspace/")},a.saveChanges=Object(C.a)(k.a.mark(function e(){var t,n,r,s,o,c,i,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({error:void 0,isSaving:!0}),t=a.state,n=t.selectedLanguages,r=t.selectedDefaultLang,s=t.category,o={name:a.state.name,description:a.state.description,category:s&&s.value,defaultLanguage:r&&r.value,languages:n&&n.map(function(e){return e.value}),details:{website:a.state.website,phoneNumber:a.state.phoneNumber,termsConditions:a.state.termsConditions,emailAddress:a.state.emailAddress,avatarUrl:a.state.avatarUrl,coverPictureUrl:a.state.coverPictureUrl,privacyPolicy:a.state.privacyPolicy}},c=a.state.status&&a.state.status.value,o.disabled="disabled"===c&&o.defaultLanguage===a.bot.defaultLanguage,o.private="private"===c,i=P.a.validate(o,D.BotEditSchema),!(l=i.error)){e.next=11;break}return ee("The form contains errors"),a.setState({error:l,isSaving:!1}),e.abrupt("return");case 11:return e.next=13,Oe.getSecured().post("/admin/bots/".concat(a.state.botId),o).catch(function(e){return a.setState({error:e,isSaving:!1})});case 13:return e.next=15,a.props.fetchBots();case 15:$("Bot configuration updated successfully"),a.backToList();case 17:case"end":return e.stop()}},e)})),a.toggleMoreOpen=function(){a.setState({moreOpen:!a.state.moreOpen})},a.handleInputChanged=function(e){return a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleStatusChanged=function(e){return a.setState({status:e})},a.handleCategoryChanged=function(e){return a.setState({category:e})},a.handleDefaultLangChanged=function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedDefaultLang){e.next=3;break}return a.setState({selectedDefaultLang:t}),e.abrupt("return");case 3:if(a.state.selectedDefaultLang===t){e.next=8;break}return e.next=6,dt("Are you sure you want to change the language of your bot from ".concat(a.state.selectedDefaultLang.label," to ").concat(t.label,"? All of your content elements will be copied, make sure you translate them."),{acceptLabel:"Change"});case 6:e.sent&&a.setState({selectedDefaultLang:t});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleLanguagesChanged=function(e){a.setState({selectedLanguages:e})},a.handleCommunityLanguageChanged=function(e){a.setState({selectedDefaultLang:e,selectedLanguages:[e]})},a.handleImageFileChanged=function(){var e=Object(C.a)(k.a.mark(function e(t){var n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,t.target.files){e.next=3;break}return e.abrupt("return");case 3:if(t.target.files[0].type.includes("image/")){e.next=6;break}return a.setState({error:"".concat(n," requires an image file")}),e.abrupt("return");case 6:return(r=new FormData).append("file",t.target.files[0]),a.state.error&&a.setState({error:null}),e.next=11,Oe.getSecured().post("/bots/".concat(a.state.botId,"/media"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState(Object(y.a)({},n,e.data.url))}).catch(function(e){a.setState({error:e})});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renderLanguages=function(){return a.props.licensing&&a.props.licensing.isPro?r.a.createElement(F.a,null,r.a.createElement(M.a,{md:6},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"sup-lang"},r.a.createElement("strong",null,"Supported Languages"),a.renderHelp("Your bot can support different languages, select desired languages","sup-lang")),r.a.createElement(L.a,{options:a.state.languagesList,isMulti:!0,value:a.state.selectedLanguages,onChange:a.handleLanguagesChanged}))),r.a.createElement(M.a,{md:6},r.a.createElement(U.a,null,r.a.createElement(H.a,null,r.a.createElement("strong",null,"Default language"),a.renderHelp("Choose the default language for your bot. First of supported language is picked by default.","def-lang")),r.a.createElement(L.a,{options:a.state.languagesList,value:a.state.selectedDefaultLang,onChange:a.handleDefaultLangChanged})))):r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"sup-lang"},r.a.createElement("strong",null,"Language"),a.renderHelp("Choose desired language among those","sup-lang")),r.a.createElement(L.a,{options:a.state.languagesList,value:a.state.selectedLanguages,onChange:a.handleCommunityLanguageChanged}))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.botCategoriesFetched||this.props.fetchBotCategories(),this.props.licensing||this.props.fetchLicensing(),this.props.languages||this.props.fetchLanguages(),this.props.fetchBots(),this.prepareCategories()}},{key:"componentDidUpdate",value:function(e){e.bots!==this.props.bots&&this.loadBot(),e.botCategories!==this.props.botCategories&&this.prepareCategories(),e.languages!==this.props.languages&&this.updateLanguages()}},{key:"loadBot",value:function(){var e=this,t=this.props.match.params.botId;this.bot=this.props.bots.find(function(e){return e.id===t});var a=this.bot.disabled?"disabled":this.bot.private?"private":"public",n=Y.a.get(this.bot,"details",{});this.initialFormState={name:this.bot.name||"",description:this.bot.description||"",website:n.website||"",phoneNumber:n.phoneNumber||"",termsConditions:n.termsConditions||"",privacyPolicy:n.privacyPolicy||"",emailAddress:n.emailAddress||"",status:pt.find(function(e){return e.value===a}),category:this.state.categories.find(function(t){return t.value===e.bot.category}),avatarUrl:n.avatarUrl||"",coverPictureUrl:n.coverPictureUrl||"",selectedLanguages:this.bot.languages||[],selectedDefaultLang:this.bot.defaultLanguage},this.setState(Object(x.a)({botId:t},this.initialFormState,{languages:this.bot.languages||[],defaultLanguage:this.bot.defaultLanguage}),this.updateLanguages)}},{key:"renderHelp",value:function(e,t){return r.a.createElement("span",null,r.a.createElement(j.c,{id:"help".concat(t),className:"section-title-help"}),r.a.createElement(V.a,{placement:"right",target:"help".concat(t)},e))}},{key:"renderDetails",value:function(){var e=this.state,t=e.categories,a=e.category,n=e.description,s=e.error,o=e.name,c=e.status;return r.a.createElement("div",null,s&&r.a.createElement(A.a,{color:"danger"},s.message),r.a.createElement(q.a,null,r.a.createElement(F.a,{form:!0},r.a.createElement(M.a,{md:5},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"name"},r.a.createElement("strong",null,"Name")),r.a.createElement(Q.a,{id:"input-name",type:"text",name:"name",value:o,onChange:this.handleInputChanged}))),r.a.createElement(M.a,{md:4},!!t.length&&r.a.createElement(U.a,null,r.a.createElement(H.a,null,r.a.createElement("strong",null,"Category")),r.a.createElement(L.a,{id:"select-category",options:t,value:a,onChange:this.handleCategoryChanged}))),r.a.createElement(M.a,{md:3},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"status"},r.a.createElement("strong",null,"Status"),this.renderHelp("Public bots can be accessed by anyone, while private are only accessible by authenticated users.\n                Please note that private bots cannot be embedded on a website.\n                This should only be used for testing purposes while developing or if you access it directly using shortlinks")),r.a.createElement(L.a,{id:"select-status",options:pt,value:c,onChange:this.handleStatusChanged,isSearchable:!1})))),r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"description"},r.a.createElement("strong",null,"Description")),r.a.createElement(Q.a,{id:"input-description",type:"textarea",name:"description",value:n,onChange:this.handleInputChanged})),this.renderLanguages()),this.renderCollapsible())}},{key:"renderMoreDetails",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{form:!0},r.a.createElement(M.a,{md:4},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"website"},r.a.createElement("strong",null,"Website")),r.a.createElement(Q.a,{id:"input-website",type:"text",name:"website",value:this.state.website,onChange:this.handleInputChanged}))),r.a.createElement(M.a,{md:4},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"phoneNumber"},r.a.createElement("strong",null,"Phone Number")),r.a.createElement(Q.a,{id:"input-phone",type:"text",name:"phoneNumber",value:this.state.phoneNumber,onChange:this.handleInputChanged}))),r.a.createElement(M.a,{md:4},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"emailAddress"},r.a.createElement("strong",null,"Contact E-mail")),r.a.createElement(Q.a,{id:"input-email",type:"text",name:"emailAddress",value:this.state.emailAddress,onChange:this.handleInputChanged})))),r.a.createElement(F.a,{form:!0},r.a.createElement(M.a,{md:6},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"termsConditions"},r.a.createElement("strong",null,"Link to Terms & Conditions")),r.a.createElement(Q.a,{id:"input-termsConditions",type:"text",name:"termsConditions",value:this.state.termsConditions,onChange:this.handleInputChanged}))),r.a.createElement(M.a,{md:6},r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"termsConditions"},r.a.createElement("strong",null,"Link to Privacy Policy")),r.a.createElement(Q.a,{type:"text",id:"input-privacyPolicy",name:"privacyPolicy",value:this.state.privacyPolicy,onChange:this.handleInputChanged})))),r.a.createElement("small",null,"This information is displayed on the Bot Information page,"," ",r.a.createElement("a",{href:"https://botpress.com/docs/tutorials/webchat-embedding",target:"_blank",rel:"noopener noreferrer"},"check the documentation for more details")))}},{key:"renderPictures",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{md:6},r.a.createElement(H.a,null,r.a.createElement("strong",null,"Bot Avatar")),r.a.createElement(Q.a,{type:"file",accept:"image/*",name:"avatarUrl",onChange:this.handleImageFileChanged}),this.state.avatarUrl!==this.initialFormState.avatarUrl&&r.a.createElement("p",{className:"configUploadSuccess"},"The bot avatar has been uploaded successfully. You need to save the form in order for the changes to take effect."),this.state.avatarUrl&&r.a.createElement("img",{height:75,alt:"avatar",src:this.state.avatarUrl})),r.a.createElement(M.a,{md:6},r.a.createElement(H.a,null,r.a.createElement("strong",null,"Cover Picture")),r.a.createElement(Q.a,{type:"file",accept:"image/*",name:"coverPictureUrl",onChange:this.handleImageFileChanged}),this.state.coverPictureUrl!==this.initialFormState.coverPictureUrl&&r.a.createElement("p",{className:"configUploadSuccess"},"The cover picture has been uploaded successfully. You need to save the form in order for the changes to take effect."),this.state.coverPictureUrl&&r.a.createElement("img",{className:"coverImg",alt:"cover",src:this.state.coverPictureUrl}))))}},{key:"renderCollapsible",value:function(){var e=this;return r.a.createElement("div",{className:"bp_users-container"},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.setState({moreCollapsed:!e.state.moreCollapsed})},className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement("span",{className:"title"},"More details")),this.state.moreCollapsed?r.a.createElement(j.e,null):r.a.createElement(j.d,null))),r.a.createElement(Z.a,{isOpen:this.state.moreCollapsed},r.a.createElement("div",{style:{padding:15}},this.renderMoreDetails())),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.setState({avatarCollapsed:!e.state.avatarCollapsed})},className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement("span",{className:"title"},"Pictures")),this.state.avatarCollapsed?r.a.createElement(j.e,null):r.a.createElement(j.d,null))),r.a.createElement(Z.a,{isOpen:this.state.avatarCollapsed},r.a.createElement("div",{style:{padding:15}},this.renderPictures())))}},{key:"render",value:function(){return r.a.createElement(ct,{contentClassName:"with-sticky-action-bar",title:"Bot - ".concat(this.state.name||this.state.botId),helpText:"This page shows the details you can configure for a desired bot."},this.renderDetails(),r.a.createElement(it,null,r.a.createElement(c.b,{id:"btn-cancel",intent:_.a.NONE,text:"Cancel",disabled:this.state.isSaving,onClick:this.cancel}),r.a.createElement(c.b,{id:"btn-save",intent:_.a.PRIMARY,icon:"floppy-disk",text:"Save changes",disabled:this.state.isSaving,onClick:this.saveChanges})))}}]),t}(n.Component),ht={fetchBots:xe,fetchBotCategories:Ce,fetchLicensing:Te,fetchLanguages:function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/languages/available");case 2:a=e.sent,n=a.data,t({type:"server/FETCH_LANGUAGES_RECEIVED",languages:n.languages});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},gt=Object(i.b)(function(e){return{bots:e.bots.bots,botCategories:e.bots.botCategories,botCategoriesFetched:e.bots.botCategoriesFetched,licensing:e.license.licensing,languages:e.server.languages}},ht)(ft),At=a(242),bt=a(1215),Et=function(e){return r.a.createElement("div",{className:"split_page"},r.a.createElement("div",{className:"split_page-container"},e.children),e.sideMenu&&r.a.createElement("div",{style:{width:e.sideMenuWidth||180}},e.sideMenu))},vt=a(9),wt=Object(i.b)(function(e){return{serverConfig:e.server.serverConfig,serverConfigLoaded:e.server.serverConfigLoaded}},{fetchServerConfig:De})(function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)([]),l=Object(vt.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)(function(){e.serverConfigLoaded?e.serverConfig?m():o(!0):e.fetchServerConfig()},[e.serverConfig]);var m=function(){var t,a=(t=e.serverConfig,{redis:!(!Y.a.get(t,"env.REDIS_URL")||"true"!==Y.a.get(t,"env.CLUSTER_ENABLED")),pro:Y.a.get(t,"config.pro.enabled")||"true"===Y.a.get(t,"env.PRO_ENABLED"),monitoring:Y.a.get(t,"config.pro.monitoring.enabled"),alerting:Y.a.get(t,"config.pro.alerting.enabled")});d(e.requirements.filter(function(e){return!a[e]})),o(a[e.feature])},p=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/server/features/enable/".concat(e.feature));case 3:$("Configuration updated successfully! Restart Botpress for changes to take effect"),e.fetchServerConfig(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ee("Could not update configuration: ".concat(t.t0.message));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}();return u.length?r.a.createElement("div",{className:"requirements"},r.a.createElement(c.d,{title:"Missing requirements"},e.messageReqMissing||"To use this feature, these features are also required:",r.a.createElement("div",{style:{padding:"20px 0"}},u.includes("pro")&&r.a.createElement("strong",null,"Botpress Pro must be enabled with a valid license"),u.includes("redis")&&r.a.createElement("strong",null,"Redis must be enabled and correctly configured"),u.includes("monitoring")&&r.a.createElement("strong",null,"Monitoring must be enabled")))):s?r.a.createElement("div",null,e.children):r.a.createElement("div",{className:"requirements"},r.a.createElement(c.d,{title:"Feature disabled"},e.messageDisabled||"To use this feature, click on the button below. A server restart will be required for changes to take effect.",r.a.createElement("div",{style:{padding:"20px 0"}},r.a.createElement(c.b,{onClick:p,text:"Enable this feature"}))))}),yt=a(541),Ot=a.n(yt),kt=function(){return r.a.createElement(F.a,null,r.a.createElement(M.a,{className:"section",xs:12},r.a.createElement("div",{className:"middle"},r.a.createElement("img",{src:Ot.a,alt:"loading"}))))},Ct=a(165),xt=(a(492),function(e){var t=e.data,a=[{Header:"Rule",accessor:"ruleName"},{Header:"Host",accessor:"hostName"},{Header:"Start Time",Cell:function(e){return qe()(e.value).format("YYYY-MM-DD HH:mm:ss")},width:140,className:"center",accessor:"startTime"},{Header:"End Time",Cell:function(e){return e.value&&qe()(e.value).format("YYYY-MM-DD HH:mm:ss")||""},width:140,accessor:"endTime"},{Header:"Trigger Value",width:100,accessor:"triggerValue"}];return r.a.createElement(Ct.a,{columns:a,data:t,defaultPageSize:5,defaultSorted:[{id:"host"}],className:"-striped -highlight monitoringOverview"})}),Rt=[{value:"1h",label:"1 hour"},{value:"2h",label:"2 hours"},{value:"5h",label:"5 hours"},{value:"15h",label:"15 hours"},{value:"24h",label:"24 hours"}],It=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={intervalId:void 0,timeFrame:void 0,timeFrameOptions:Rt,autoRefresh:!1,error:void 0},a.handleTimeFrameChanged=function(e){return a.setState({timeFrame:e},a.queryData)},a.handleAutoRefreshChanged=function(e){var t,n=e.target.checked;n&&!a.state.intervalId?t=setInterval(function(){return a.queryData()},1e4):!n&&a.state.intervalId&&clearInterval(a.state.intervalId),a.setState({autoRefresh:n,intervalId:t})},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.setState({timeFrame:Rt[0]},this.queryData)}},{key:"componentWillUnmount",value:function(){this.state.intervalId&&clearInterval(this.state.intervalId)}},{key:"queryData",value:function(){var e=Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.timeFrame){e.next=2;break}return e.abrupt("return");case 2:try{t=qe()().subtract(ne()(this.state.timeFrame.value)).toDate().getTime(),a=qe()().toDate().getTime(),this.props.fetchIncidents(t,a)}catch(n){this.setState({error:n.message})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderTables",value:function(){return this.props.incidents?r.a.createElement("div",null,r.a.createElement("h4",null,"Active Incidents"),r.a.createElement(xt,{data:this.props.incidents.active}),r.a.createElement("h4",null,"Resolved Incidents"),r.a.createElement(xt,{data:this.props.incidents.resolved})):null}},{key:"renderNoData",value:function(){return r.a.createElement(ct,{title:"Alerting & Incidents"},r.a.createElement(bt.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(At.a,null),"\xa0 Alerting is not enabled or there is no statistics."),r.a.createElement("p",null,"Make sure that alerting is enabled in your Botpress Config (and that you have restarted the server if you just made the change).")))))}},{key:"renderChild",value:function(){return this.props.incidents?this.props.loadingIncidents?r.a.createElement(kt,null):r.a.createElement(Et,{sideMenu:this.renderSideMenu()},this.renderTables()):this.renderNoData()}},{key:"renderSideMenu",value:function(){var e={control:function(e){return Object(x.a)({},e,{minHeight:30})},dropdownIndicator:function(e){return Object(x.a)({},e,{padding:4})},clearIndicator:function(e){return Object(x.a)({},e,{padding:4})},valueContainer:function(e){return Object(x.a)({},e,{padding:"0px 6px"})},input:function(e){return Object(x.a)({},e,{margin:0,padding:0})}};return r.a.createElement("div",{style:{fontSize:"80%"}},r.a.createElement("strong",null,"Time Frame"),r.a.createElement(L.a,{styles:e,options:Rt,value:this.state.timeFrame,onChange:this.handleTimeFrameChanged,isSearchable:!1}),r.a.createElement("strong",null,"Auto-Refresh"),r.a.createElement("br",null),r.a.createElement(H.a,null,r.a.createElement("input",{style:{marginTop:8},name:"autoRefresh",type:"checkbox",checked:this.state.autoRefresh,onChange:this.handleAutoRefreshChanged})," ",r.a.createElement("strong",null,"Enabled")))}},{key:"render",value:function(){return r.a.createElement(ct,{title:"Alerting & Incidents",fullWidth:!0,superAdmin:!0},r.a.createElement(wt,{requirements:["redis","pro","monitoring"],feature:"alerting"},this.renderChild()))}}]),t}(n.Component),St={fetchIncidents:function(e,t){return function(){var a=Object(C.a)(k.a.mark(function a(n){var r,s;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"bots/FETCH_INCIDENTS_REQUESTED"}),a.next=3,Oe.getSecured().post("/admin/server/incidents",{fromTime:e,toTime:t});case 3:r=a.sent,s=r.data,n({type:"bots/FETCH_INCIDENTS_RECEIVED",data:s});case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},Nt=Object(i.b)(function(e){return{incidents:e.monitoring.incidents}},St)(It),Tt=function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i="dot";return"success"===e.status?i="small-tick":["warning","danger"].includes(e.status)&&(i="small-cross"),r.a.createElement("div",{className:"bp3-ui-text"},r.a.createElement("div",{onClick:function(){return o(!s)},className:"checklist-header"},r.a.createElement("div",null,r.a.createElement(c.l,{icon:i,intent:e.status}),r.a.createElement("span",{className:"title"},e.title)),r.a.createElement(c.l,{icon:s?"caret-up":"caret-down"})),r.a.createElement(c.f,{isOpen:s},e.docs&&r.a.createElement("span",{className:"checklist-docs"},r.a.createElement(c.F,{content:"Click here to read more about this item in the documentation",position:J.a.BOTTOM},r.a.createElement("a",{href:e.docs,target:"_blank"},r.a.createElement(c.l,{icon:"info-sign"})))),r.a.createElement("div",{className:"checklist-item"},e.children,e.source&&r.a.createElement("div",{className:"checklist-sources"},r.a.createElement("blockquote",{className:"bp3-blockquote"},e.source.map(function(e){return r.a.createElement("div",{className:"checklist-source",key:e.key},e.type?r.a.createElement(n.Fragment,null,r.a.createElement(c.C,{intent:"env"===e.type?_.a.NONE:_.a.PRIMARY},e.key)," ",r.a.createElement("code",null,e.value)):r.a.createElement("span",null,e.key,": ",r.a.createElement("code",null,e.value)))}))))))},jt=function(e){return void 0===e||null===e?"Not set":!1===e||!0===e?e.toString():e.length?e.toString():"Not set"},Dt=function(e){return"Not set"!==e},Bt=window.location.protocol.substr(0,window.location.protocol.length-1),Pt=function(e){return r.a.createElement(ct,{title:"Production Checklist",superAdmin:!0,helpText:r.a.createElement("span",null,"This is a checklist of recommended settings when running Botpress in production.",r.a.createElement("br",null)," Environment variables are displayed in ",r.a.createElement(c.C,null,"gray")," and values from the botpress.config.json config file in ",r.a.createElement(c.C,{intent:_.a.PRIMARY},"blue"),r.a.createElement("br",null),r.a.createElement("br",null),'Once your server is correctly setup, we recommend disabling this page by setting the environment variable BP_DISABLE_SERVER_CONFIG to "true"')},e.children)},Lt=Object(i.b)(function(e){return{serverConfig:e.server.serverConfig}},{fetchServerConfig:De})(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(vt.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)(function(){e.serverConfigLoaded||e.fetchServerConfig(),g()},[]);var g=function(){var e=Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/languages/sources");case 2:return t=e.sent,a=t.data,o(a.languageSources),e.next=7,A();case 7:return e.next=9,b();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(C.a)(k.a.mark(function e(){var t,a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/server/debug");case 2:t=e.sent,a=t.data,n=Object.keys(a).filter(function(e){return e.startsWith("bp:audit")}).map(function(e){return a[e]}),d(Y.a.some(n,Boolean));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(C.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Y.a.times(3,Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/auth/ping");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.payload.serverId);case 5:case"end":return e.stop()}},e)}))));case 2:t=e.sent,h(Y.a.every(t,function(e){return e===t[0]}));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();if(!e.serverConfig)return r.a.createElement(Pt,null,r.a.createElement(c.d,{intent:_.a.PRIMARY},'Server configuration is disabled. To view this page, set the environment variable "BP_DISABLE_SERVER_CONFIG" to false'));var E=function(t){return jt(Y.a.get(e.serverConfig.env,t))},v=function(t){return jt(Y.a.get(e.serverConfig.config,t))},w=function(t){return jt(Y.a.get(e.serverConfig.live,t))},y=Y.a.get(s,"[0].endpoint","");return r.a.createElement(Pt,null,r.a.createElement("div",{className:"checklist"},r.a.createElement(Tt,{title:"Enable Botpress Professional",docs:"https://botpress.com/docs/pro/about-pro/",status:"true"===E("PRO_ENABLED")||"true"===v("pro.enabled")?"success":"warning",source:[{type:"env",key:"PRO_ENABLED",value:E("BP_PRODUCTION")},{type:"env",key:"BP_LICENSE_KEY",value:E("BP_LICENSE_KEY")},{type:"config",key:"pro.enabled",value:v("pro.enabled")},{type:"config",key:"pro.licenseKey",value:v("pro.licenseKey")}]},"Botpress Pro provides multiple features ready to be used in an enterprise-grade solution."),r.a.createElement(Tt,{title:"Use a Postgres database",docs:"https://botpress.com/docs/tutorials/database/#how-to-switch-from-sqlite-to-postgres",status:E("DATABASE_URL").startsWith("postgres")?"success":"warning",source:[{type:"env",key:"DATABASE_URL",value:E("DATABASE_URL")}]},"By default, Botpress uses an SQLite database, which is not recommended in a production environment. Postgres is more resilient and allows to run Botpress in cluster mode (using multiple servers to handle the load)."),r.a.createElement(Tt,{title:"Use the database BPFS storage",docs:"https://botpress.com/docs/advanced/hosting/#overview",status:"database"===E("BPFS_STORAGE")?"success":"warning",source:[{type:"env",key:"BPFS_STORAGE",value:E("BPFS_STORAGE")}]},"When this option is set, every bots and configuration files are stored in the database, and only that copy is edited when you make changes to them using the interface. This way, multiple servers can access the same up-to-date data at the same time."),r.a.createElement(Tt,{title:"Run Botpress in production mode",status:"true"===E("BP_PRODUCTION")?"success":"warning",source:[{type:"env",key:"BP_PRODUCTION",value:E("BP_PRODUCTION")}]},"When you run Botpress in production, these changes happens:",r.a.createElement("ul",null,r.a.createElement("li",null,"Hide stack traces when error occurs"),r.a.createElement("li",null,"Hides debug logs and logging of standard errors to optimize speed"),r.a.createElement("li",null,"Optimizes some validations for speed"),r.a.createElement("li",null,"Enables the use of multiple servers (cluster mode)"))),r.a.createElement(Tt,{title:"Configure the external server URL",docs:"https://botpress.com/docs/advanced/configuration/#exposing-your-bot-on-the-internet",status:Dt(E("EXTERNAL_URL"))||Dt(v("httpServer.externalUrl"))?"success":"warning",source:[{type:"env",key:"EXTERNAL_URL",value:E("EXTERNAL_URL")},{type:"config",key:"httpServer.externalUrl",value:v("httpServer.externalUrl")}]},r.a.createElement("span",null,"This may cause multiple issues in production, like resources not displaying correctly or links not working. When it is not set, it defaults to http://localhost:3000. When using Botpress Professional, this value is also used to validate your license.")),r.a.createElement(Tt,{title:"Enable Redis support",status:Dt(E("REDIS_URL"))&&Dt(E("CLUSTER_ENABLED"))?"success":"warning",source:[{type:"env",key:"REDIS_URL",value:E("REDIS_URL")},{type:"env",key:"CLUSTER_ENABLED",value:E("CLUSTER_ENABLED")}]},"Redis allows you to run multiple Botpress servers, all using the same data. Both variables below must be configured for Redis to work proprely"),r.a.createElement(Tt,{title:"Restrict CORS to your own domain",status:"false"===v("httpServer.cors.enabled")||Dt(v("httpServer.cors.origin"))?"success":"warning",source:[{type:"config",key:"httpServer.cors.enabled",value:v("httpServer.cors.enabled")},{type:"config",key:"httpServer.cors.origin",value:v("httpServer.cors.origin")}]},"By default, Botpress allows any origin to reach the server. You can either disable CORS completely (set the configuration to false), or set an allowed origin"),r.a.createElement(Tt,{title:"Host your own language server",docs:"https://botpress.com/docs/advanced/hosting/#language-server",status:y.includes("botpress.io")?"warning":"success",source:[{type:"config",key:"nlu.json: languageSources",value:y}]},"The default language server configured with Botpress is a public server, which has request limitations and should not be relied upon when serving customers. Please follow the instructions in our documentation to setup your own, then change the server URL in the configuration file ",r.a.createElement("strong",null,"global/data/config/nlu.json")),r.a.createElement(Tt,{title:"Securing your server with HTTPS",docs:"https://botpress.com/docs/advanced/hosting/#secure-configuration-for-the-nginx-server",status:"https"===Bt?"success":"warning",source:[{key:"Detected protocol",value:Bt}]},"Botpress doesn't handle certificates and https headers directly. Those should be handled by a NGINX server in front of it. We have a recommended NGINX configuration sample in the documentation."),r.a.createElement(Tt,{title:"Enable audit trail",docs:"https://botpress.com/docs/advanced/configuration/#advanced-logging",status:u?"success":"warning"},"You can enable a special debug scope that tracks every requests sent to the server (and the corresponding user/ip address) and output them to the log file. You can configure those scopes by clicking on 'Debug' in the menu on the left"),r.a.createElement(Tt,{title:"Enable Sticky Sessions",docs:"https://botpress.com/docs/next/tutorials/cluster-digital-ocean#instructions",status:f?"success":"warning",source:[{type:"config",key:"httpServer.socketTransports",value:v("httpServer.socketTransports")}]},'When running Botpress in Cluster mode with multiple servers, it is recommended to enable sticky sessions so users are being served from the same server. When using "Websocket" as a primary socket transport, it is mandatory to enable it, otherwise the handshake will never complete. A green check indicates that either sticky is enabled, or you only have one server.',r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"This setting must be enabled on your load balancer."),r.a.createElement("br",null),r.a.createElement("br",null),"Here is your current socket transports configuration:"),r.a.createElement(Tt,{title:"Output logs to the filesystem",docs:"https://botpress.com/docs/advanced/configuration/#logs-configuration",status:"true"===v("logs.fileOutput.enabled")?"success":"none",source:[{type:"config",key:"logs.fileOutput.enabled",value:v("logs.fileOutput.enabled")}]},"By default, Botpress does some minimal logging to the database. It is recommended to enable the log output on the file system to keep traces"),r.a.createElement(Tt,{title:"Change Botpress base path",docs:"https://botpress.com/docs/advanced/configuration/#changing-the-base-url-of-your-bot",status:Dt(w("ROOT_PATH"))?"success":"none",source:[{key:"Current base path",value:Dt(w("ROOT_PATH"))?w("ROOT_PATH"):"/"}]},"By default, all requests are handled at the top level of the external url. It is possible to change that path (for example to use http://localhost:3000/botpress). You can do that by updating your server's EXTERNAL_URL and adding the suffix at the end."),r.a.createElement(Tt,{title:"Create custom roles and review permissions",docs:"https://botpress.com/docs/pro/rbac/#adding-a-new-role",status:"none"},"There is a default set of role and permissions when you create a workspace. It is recommended to review and update them."),r.a.createElement(Tt,{title:"Enable other authentication mechanism",docs:"https://botpress.com/docs/advanced/authentication/#docsNav",status:"none"},"The default authentication method is a username/password, but you can enable additional authentication strategies to access Botpress. We currently support LDAP, SAML and OAUTH2."),r.a.createElement(Tt,{title:"Configure your Reverse Proxy and Load Balancing",docs:"https://botpress.com/docs/advanced/hosting/#setting-up-nginx",status:"none"},"Check the documentation for more information")))}),Ft=["bytes","Kb","Mb","Gb","Tb"];function Mt(e){var t=Math.log2(e),a=Math.min(Math.floor(t/10),4),n=e/Math.pow(2,10*a);return"".concat(n.toFixed(0)," ").concat(Ft[a])}var Ut=function(e){var t=e.current/e.total,a="".concat(Mt(e.current)," / ").concat(Mt(e.total));return r.a.createElement(c.F,{content:a,position:J.a.TOP},r.a.createElement("div",{style:{width:"250px"}},r.a.createElement(c.v,{value:t})))},Ht=function(e){var t=Object(n.useState)(!1),s=Object(vt.a)(t,2),o=s[0],i=s[1],l=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt("Are you sure that you want to delete ".concat(e.language.name," from the server?"),{acceptLabel:"Delete"});case 2:if(!t.sent){t.next=5;break}return t.next=5,Oe.getSecured().post("/admin/languages/".concat(e.language.code,"/delete"));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getSecured().post("/admin/languages/".concat(e.language.code));case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),d=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,Oe.getSecured({timeout:1e4}).post("/admin/languages/".concat(e.language.code,"/load"));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("error loading model");case 9:return t.prev=9,i(!1),t.finish(9);case 12:case"end":return t.stop()}},t,null,[[1,6,9,12]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"language"},r.a.createElement("div",null,r.a.createElement("div",{className:"flag"},r.a.createElement("img",{src:function e(t){try{return a(1038)("./".concat(t,".svg"))}catch(n){return e("missing")}}(e.language.code),alt:e.language.code})),r.a.createElement("span",null,e.language.name)),r.a.createElement("div",{className:"action"},e.downloadProgress&&r.a.createElement(Ut,{current:e.downloadProgress.progress.size,total:e.language.size}),e.allowActions&&!e.downloadProgress&&!e.installed&&r.a.createElement(c.b,{small:!0,onClick:u,minimal:!0,icon:"import"}),e.allowActions&&e.installed&&!e.loaded&&r.a.createElement(c.b,{disabled:o,minimal:!0,icon:"updated",onClick:d},o?"loading":"Load"),e.allowActions&&e.installed&&r.a.createElement(c.b,{disabled:o,icon:"cross",minimal:!0,onClick:l})))},Vt=function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/languages");case 2:a=e.sent,n=a.data,t(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),qt=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1];if(Object(n.useEffect)(function(){!function(){var e=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt(o);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),Object(n.useEffect)(function(){var e=setInterval(Vt.bind({},o),2e3);return function(){return clearInterval(e)}}),!s)return r.a.createElement(c.y,{size:30});var i=(s.available||[]).filter(function(e){return!s.installed.find(function(t){return t.lang===e.code})}),l=Y.a.sortBy(s.installed,"name").map(function(e){return Object(x.a)({},e,s.available.find(function(t){return t.code===e.lang}))});return r.a.createElement(r.a.Fragment,null,s&&s.available.length>0&&!e.readOnly&&!!i.length&&r.a.createElement("div",{className:"languages-list"},r.a.createElement("h4",null,"Add Languages"),i.map(function(t){return r.a.createElement(Ht,{key:t.code,language:t,installed:!1,loaded:!1,allowActions:!e.readOnly,languageSource:e.languageSource,downloadProgress:s.downloading.find(function(e){return e.lang==t.code})})})),r.a.createElement("div",{className:"languages-list"},r.a.createElement("h4",null,"Installed Languages"),0===l.length&&r.a.createElement("p",null,"No languages yet"),l.map(function(t){return r.a.createElement(Ht,{key:t.code,language:t,installed:!0,loaded:t.loaded,allowActions:!e.readOnly,languageSource:e.languageSource})})))},Qt=function(e){return r.a.createElement("div",null,r.a.createElement("p",{style:{textAlign:"center"}},"Using lang server at ",r.a.createElement("br",null),e.source.endpoint),r.a.createElement("p",{style:{marginTop:50,width:240,textAlign:"center"}},r.a.createElement("small",null,"To run your own language server, follow the instructions"," ",r.a.createElement("a",{href:"https://botpress.com/docs/advanced/hosting#running-your-own-language-server",target:"_blank"},"in the documentation"))))},Zt=function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/languages/sources");case 2:return a=e.sent,n=a.data,r=n.languageSources[0],t(r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=Object(C.a)(k.a.mark(function e(t,a){var n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/languages/info");case 2:n=e.sent,r=n.data,a(r);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(n.useState)(),t=Object(vt.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(),i=Object(vt.a)(o,2),l=i[0],u=i[1];return Object(n.useEffect)(function(){(function(){var e=Object(C.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(s);case 2:return t=e.sent,e.next=5,zt(t,u);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]),r.a.createElement(ct,{title:"Language Management",superAdmin:!0},a&&l?r.a.createElement("div",{className:"languages-grid"},r.a.createElement("div",null,l.readOnly&&r.a.createElement(c.d,{intent:"warning"},"Languages cannot be edited as Language Server is read only"),r.a.createElement(qt,{languageSource:a,readOnly:l.readOnly})),r.a.createElement(Qt,{source:a,langServer:l})):r.a.createElement("div",null,"loading..."))},Wt=a(542),Gt=a(543),Kt=a.n(Gt),Xt=a(544),Jt=a.n(Xt),_t=a(545),$t=a.n(_t),ea=function(e){var t="v".concat(e.version.replace(/\./g,"_"));return r.a.createElement("div",{className:"downloads"},"Download binary",r.a.createElement("hr",null),r.a.createElement("a",{href:"https://s3.amazonaws.com/botpress-binaries/botpress-".concat(t,"-darwin-x64.zip"),target:"_blank"},r.a.createElement("img",{src:Jt.a})," Mac"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://s3.amazonaws.com/botpress-binaries/botpress-".concat(t,"-win-x64.zip"),target:"_blank"},r.a.createElement("img",{src:$t.a})," Windows"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://s3.amazonaws.com/botpress-binaries/botpress-".concat(t,"-linux-x64.zip"),target:"_blank"},r.a.createElement("img",{src:Kt.a})," Linux"),r.a.createElement("br",null),r.a.createElement("br",null),"Docker Image",r.a.createElement("hr",null),r.a.createElement("a",{href:e.dockerUrl||"https://hub.docker.com/r/botpress/server",target:"_blank"},r.a.createElement("code",null,"botpress/server:",t)))},ta={fetchLatestVersions:_e},aa=Object(i.b)(function(e){return{latestReleases:e.version.latestReleases}},ta)(function(e){return Object(n.useEffect)(function(){e.fetchLatestVersions()},[]),r.a.createElement(ct,{title:"Latest Releases"},r.a.createElement("div",{className:"releases"},e.latestReleases.map(function(e){return r.a.createElement("div",{key:e.version},r.a.createElement("div",{className:"version"},e.version,r.a.createElement("span",null,"published ",e.daysAgo)),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:Object(Wt.a)(e.details)}}),r.a.createElement(ea,{version:e.version,dockerUrl:e.dockerUrl})))})))}),na=a(1219),ra=a(86),sa=a.n(ra),oa=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(S.a)(this,Object(N.a)(t).call(this,e))).displayPolicies=function(){var e=a.props.license,t=e.seats,n=e.versions,r=e.startDate,s=e.endDate;a.setState({policies:[]}),a.addPolicy("Admins",t,a.getBreach("studio seats")),a.addPolicy("Nodes","",a.getBreach("nodes")),a.addPolicy("Version",n,a.getBreach("version")),a.addPolicy("Start Date",qe()(r).format("YYYY-MM-DD"),a.getBreach("date")),a.addPolicy("End Date",qe()(s).format("YYYY-MM-DD"),a.getBreach("date")),a.addPolicy("Server Fingerprint","",a.getBreach("fingerprint"))},a.addPolicy=function(e,t,n){a.setState(function(a){return{policies:[].concat(Object(Ie.a)(a.policies),[{name:e,status:t,breachError:n}])}})},a.state={policies:[],breachs:[]},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.displayPolicies()}},{key:"componentDidUpdate",value:function(e){e.license!==this.props.license&&this.displayPolicies()}},{key:"getBreach",value:function(e){if(this.props.breachs){var t=!0,a=!1,n=void 0;try{for(var r,s=this.props.breachs[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;if(-1!==o.toLowerCase().indexOf(e))return o}}catch(c){a=!0,n=c}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}}},{key:"render",value:function(){return r.a.createElement("table",{className:"table bp-licensing"},r.a.createElement("tbody",null,this.state.policies.map(function(e,t){return r.a.createElement("tr",{key:t,title:e.breachError},r.a.createElement("td",null,e.breachError?r.a.createElement("span",{role:"img","aria-label":"Breached"},"\u274c"):r.a.createElement("span",{className:"bp-licensing__check"},"\u2713")),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.status))})))}}]),t}(r.a.Component),ca=a(1229),ia=a(1216),la=a(1217),ua=a(1218),da=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1,licenseKey:void 0,error:void 0},a.toggleModal=function(){a.setState({isModalOpen:!a.state.isModalOpen,licenseKey:void 0,error:void 0})},a.onInputKeyPress=function(e){"Enter"===e.key&&a.changeKey()},a.onInputChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value.trim()))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"changeKey",value:function(){var e=Object(C.a)(k.a.mark(function e(){var t=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().post("admin/license/update",{licenseKey:this.state.licenseKey},{timeout:1e4}).then(function(){t.props.refresh&&t.props.refresh(),t.toggleModal()}).catch(function(e){return t.setState({error:e.message})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderModal",value:function(){var e=this;return r.a.createElement(ca.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(ia.a,{toggle:this.toggleModal},"Enter your license key"),r.a.createElement(la.a,null,this.state.error&&r.a.createElement(A.a,{color:"danger"},this.state.error),r.a.createElement(U.a,null,r.a.createElement(H.a,{for:"firstName"},"New License Key"),r.a.createElement(Q.a,{name:"licenseKey",type:"textarea",style:{height:180},onChange:this.onInputChange,onKeyPress:this.onInputKeyPress,value:this.state.licenseKey,autoFocus:!0}))),r.a.createElement(ua.a,null,r.a.createElement(na.a,{color:"primary",onClick:function(){return e.changeKey()}},"Validate & Change")))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(na.a,{size:"sm",color:"primary",outline:!0,onClick:this.toggleModal},"Enter license key"),this.renderModal())}}]),t}(n.Component),ma=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(s)))).state={waitingForReboot:!1},a.refreshKey=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().post("/admin/license/refresh");case 2:return e.next=4,a.props.fetchLicensing();case 4:case"end":return e.stop()}},e)})),a.rebootServer=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.getSecured().post("/admin/server/rebootServer");case 3:a.setState({waitingForReboot:!0}),setTimeout(function(){window.location.reload()},1e4),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a.enableProEdition=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt("Are you sure?",{acceptLabel:"Enable"});case 3:if(!e.sent){e.next=10;break}return e.next=6,Oe.getSecured().post("/admin/server/config/enablePro");case 6:if(200!==e.sent.status){e.next=10;break}return e.next=10,a.rebootServer();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a.setState({error:e.t0});case 15:case"end":return e.stop()}},e,null,[[0,12]])})),a.renderProDisabled=function(){return r.a.createElement(ct,{title:"Server License"},r.a.createElement(bt.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("h4",null,"Enable Botpress Professional"),r.a.createElement("p",null,"Make you use an ",r.a.createElement("strong",null,"official botpress binary or docker image"),", you won't be able to activate pro otherwise."),r.a.createElement("p",null,r.a.createElement("u",null,"Method 1"),r.a.createElement("br",null),"You can enable Botpress Pro by manually editing the file"," ",r.a.createElement("strong",null,"data/global/botpress.config.json")," and setting the value ",r.a.createElement("strong",null,"pro.enabled")," to true."),r.a.createElement("p",null,r.a.createElement("u",null,"Method 2"),r.a.createElement("br",null)," Click on the button below. This will enable the required configuration and will automatically reboot the server. Please note: Rebooting the server this way will prevent you from reading the logs on screen (except if you output logs to the file system).",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(na.a,{onClick:a.enableProEdition},"Enable Pro & Reboot Server"))))))},a.renderUnofficialBuild=function(){return r.a.createElement(ct,{title:"Server License"},r.a.createElement(bt.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("h4",null,"Unofficial Botpress Build"),r.a.createElement("p",null,"We noticed that you are running a custom build of Botpress, which doesn't contain the Botpress Professional extensions. Make you use an ",r.a.createElement("strong",null,"official botpress binary or docker image"),". You won't be able to activate ",r.a.createElement("strong",null,"Pro")," otherwise.")))))},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchLicensing()}},{key:"renderReboot",value:function(){return r.a.createElement(bt.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("p",null,"Please wait while the server reboots, this may take a couple of seconds."))))}},{key:"renderLicenseStatus",value:function(){return r.a.createElement("div",{className:"license-status "+(this.isLicensed?"licensed":"unlicensed")},r.a.createElement("div",null,r.a.createElement("span",{className:"license-status__badge"}),r.a.createElement("span",{className:"license-status__status"},this.isLicensed?"Licensed":"Unlicensed"),r.a.createElement("span",{className:"license-status__limits"},this.isUnderLimits?"Under Limits":"Limits breached")),r.a.createElement(na.a,{color:"link",className:"license-status__refresh",onClick:this.refreshKey},r.a.createElement("svg",{className:"icon",viewBox:"0 0 90 80",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M74.59 57.824l10.498-5.863a3 3 0 1 1 2.926 5.238l-17.779 9.93a2.998 2.998 0 0 1-4.16-1.302l-8.934-18.299a3.002 3.002 0 0 1 1.38-4.013 3.005 3.005 0 0 1 4.013 1.38l5.795 11.87A33.02 33.02 0 0 0 72.865 40c0-18.311-14.897-33.207-33.209-33.207-18.31 0-33.206 14.896-33.206 33.207 0 18.312 14.896 33.209 33.206 33.209 1.236 0 2.476-.068 3.685-.202a3 3 0 0 1 .663 5.963 39.448 39.448 0 0 1-4.348.239C18.038 79.208.45 61.619.45 39.999.45 18.38 18.038.792 39.656.792c21.62 0 39.209 17.588 39.209 39.207a39.011 39.011 0 0 1-4.276 17.825z",fillRule:"evenodd"}))))}},{key:"renderFingerprintStatus",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"license-infos license-infos--fingerprint"},r.a.createElement("strong",{className:"license-infos__label"},"Cluster fingerprint:"),r.a.createElement("code",null,this.serverFingerprints.cluster_url),r.a.createElement(ra.CopyToClipboard,{text:this.serverFingerprints.cluster_url},r.a.createElement(na.a,{color:"link",size:"sm",className:"license-infos__icon"},r.a.createElement("svg",{href:"#",id:"TooltipCopy",height:"15",viewBox:"0 0 16 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M3.996 0H16v16h-4.004v4H0V4h3.996V0zM6 2v12h8V2H6zM2 6v12h8v-1.997H3.998V6H2z",fill:"#4A4A4A",fillRule:"evenodd"})))),r.a.createElement(V.a,{placement:"right",target:"TooltipCopy"},"Copy to clipboard")),this.isWrongFingerprint&&r.a.createElement(A.a,{color:"danger"},"Your license fingerprint doesn't match your machine/cluster fingerprints."))}},{key:"renderBody",value:function(){return this.state.waitingForReboot?this.renderReboot():this.props.licensing&&!this.props.licensing.isBuiltWithPro?this.renderUnofficialBuild():this.props.licensing&&!this.props.licensing.isPro?this.renderProDisabled():r.a.createElement(ct,{title:"Server License",superAdmin:!0},r.a.createElement(F.a,null,r.a.createElement(M.a,{sm:"12",lg:"7"},this.renderLicenseStatus(),this.renderFingerprintStatus(),r.a.createElement(da,{refresh:this.props.fetchLicensing})),r.a.createElement(M.a,{sm:"12",lg:"5"},r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Friendly name:"),this.license.label||"N/A"),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Renew date:"),this.renewDate),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Support:"),this.license.support,r.a.createElement("svg",{className:"license-infos__icon",href:"#",id:"TooltipSupport",width:"15",height:"15",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M9 16h2v-2H9v2zm1-16C4.477 0 0 4.477 0 10A10 10 0 1 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14a4 4 0 0 0-4 4h2a2 2 0 1 1 4 0c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5a4 4 0 0 0-4-4z",fill:"#4A4A4A",fillRule:"nonzero"})),r.a.createElement(V.a,{placement:"right",target:"TooltipSupport"},"This is the support offered by Botpress")),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Allowed Nodes:"),this.license.limits&&Number(this.license.limits.nodes)+1),r.a.createElement("hr",null),this.props.licensing&&r.a.createElement("div",null,r.a.createElement("h5",null,"Policies"),r.a.createElement(oa,{license:this.license,breachs:this.props.licensing.breachReasons})))))}},{key:"render",value:function(){return this.props.loading?r.a.createElement(kt,null):this.renderBody()}},{key:"isUnderLimits",get:function(){return"breached"!==Y.a.get(this.props.licensing,"status")}},{key:"isLicensed",get:function(){return"licensed"===Y.a.get(this.props.licensing,"status")}},{key:"renewDate",get:function(){return qe()(Y.a.get(this.props.licensing,"license.paidUntil",new Date)).format("lll")}},{key:"serverFingerprints",get:function(){return Y.a.get(this.props.licensing,"fingerprints",{})}},{key:"license",get:function(){return this.props.licensing&&this.props.licensing.license||{}}},{key:"isWrongFingerprint",get:function(){return!!(this.serverFingerprints&&this.license&&this.license.fingerprint)&&this.serverFingerprints[this.license.fingerprintType]!==this.license.fingerprint}}]),t}(r.a.Component),pa={fetchLicensing:Te},fa=Object(i.b)(function(e){return{loading:e.license.loading,licensing:e.license.licensing}},pa)(ma),ha=a(246),ga=a(49),Aa=function(e){var t=e.payload,a=e.date,n=e.uniqueHosts;return r.a.createElement("div",{className:"graphToolTip"},r.a.createElement("table",{cellSpacing:0,cellPadding:0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:10,style:{textAlign:"center"}},qe()(a).format("HH:mm:ss"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Host "),t.map(function(e){return r.a.createElement("th",{style:{color:e.stroke||e.fill},key:e.name},e.name)})),n.map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,e),t.map(function(t){return r.a.createElement("td",{style:{color:t.stroke||t.fill},key:t.name},Y.a.get(t.payload.hosts[e],t.dataKey.replace("summary.",""))," ",t.unit)}))}))))},ba=function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1];Object(n.useEffect)(function(){o(!1)},[e.isOpen]);var i=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/server/rebootServer?hostname=".concat(e.hostname));case 3:o(!0),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),ee(t.t0.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(c.h,{title:"Server Control",isOpen:e.isOpen,onClose:e.toggle,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("div",{className:lt.a.DIALOG_BODY},s?r.a.createElement("div",null,"Server restart in progress. To know when the server is back up, watch the uptime for that server in the Overview. You can close this window safely."):r.a.createElement("div",null,"You are about to restart the Botpress server hosted on ",r.a.createElement("br",null)," ",r.a.createElement("strong",null,e.hostname),". ",r.a.createElement("br",null)," ",r.a.createElement("br",null),"Are you sure?")),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},s?r.a.createElement("div",null," ",r.a.createElement(c.b,{id:"btn-cancel",text:"Close",onClick:e.toggle,intent:_.a.NONE})):r.a.createElement("div",null,r.a.createElement(c.b,{id:"btn-cancel",text:"Cancel",onClick:e.toggle,intent:_.a.NONE}),r.a.createElement(c.b,{id:"btn-restart",text:"Restart server now",onClick:i,intent:_.a.DANGER})))))},Ea=function(e){var t=e.data,a=Object(n.useState)(!1),s=Object(vt.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(""),u=Object(vt.a)(l,2),d=u[0],m=u[1],p=function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m(t),i(!0);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),f=[{Header:"Host",accessor:"host"},{Header:"Uptime",Cell:function(e){var t=qe.a.duration(e.value,"seconds").asMinutes();return"".concat(Math.round(t)," mins")},width:120,className:"center",accessor:"uptime"},{Header:"Peak CPU Usage",Cell:function(e){return e.value+"%"},width:120,accessor:"cpu.usage"},{Header:"Peak Mem Usage",Cell:function(e){return e.value+"%"},width:120,accessor:"mem.usage"},{Header:"Requests",width:120,className:"center",accessor:"requests.count"},{Header:"Events In",width:120,className:"center",accessor:"eventsIn.count",align:"right"},{Header:"Events Out",width:120,className:"center",accessor:"eventsOut.count"},{Header:"Warnings",width:120,className:"center",accessor:"warnings.count"},{Header:"Errors",width:120,className:"center",accessor:"errors.count"},{Cell:function(e){return r.a.createElement(c.F,{content:"Restart server"},r.a.createElement(c.b,{icon:"power",onClick:function(){return p(e.original.host)},small:!0}))},filterable:!1,width:45}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct.a,{columns:f,data:t,defaultPageSize:5,defaultSorted:[{id:"host",desc:!1}],className:"-striped -highlight monitoringOverview"}),r.a.createElement(ba,{hostname:d,isOpen:o,toggle:function(){return i(!o)}}))},va=function(e){return"".concat(e.hostname," (").concat(e.serverId,")")},wa=Object(i.b)(function(e){return{health:e.bots.health}},{fetchBotHealth:Re})(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)([]),l=Object(vt.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)(function(){e.health?(p(),m()):e.fetchBotHealth()},[e.health]);var m=function(){var t=Y.a.uniq(Y.a.flatMap(e.health,function(e){return Object.keys(e.bots)})).map(function(t){return{botId:t,data:e.health.reduce(function(e,a){return e[va(a)]=a.bots[t],e},{})}});o(t)},p=function(){var t=e.health.map(function(e){var t=va(e);return{Header:e.hostname,columns:[{Header:"Status",Cell:function(e){switch(Y.a.get(e.original,"data[".concat(t,"].status"))){default:return"N/A";case"error":return r.a.createElement("span",{style:{color:"red"}},"Error");case"mounted":return"Mounted";case"disabled":return"Disabled";case"unmounted":return"Unmounted"}},width:80,accessor:"data[".concat(t,"].status")},{Header:"Errors",width:60,className:"center",accessor:"data[".concat(t,"].errorCount")},{Header:"Warnings",width:60,className:"center",accessor:"data[".concat(t,"].warningCount")}]}});d([{Header:"Bot ID",accessor:"botId",width:250}].concat(Object(Ie.a)(t),[{Cell:function(e){return r.a.createElement(c.F,{content:"Reload bot"},r.a.createElement(c.b,{icon:"refresh",onClick:function(){return f(e.original.botId)},small:!0}))},filterable:!1,width:45}]))},f=function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt("Are you sure you want to reload the bot ".concat(t,"?"),{acceptLabel:"Reload bot"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Oe.getSecured().post("/admin/bots/".concat(t,"/reload"));case 7:$("Bot remounted successfully"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),ee("Could not mount bot. Check server logs for details");case 14:case"end":return e.stop()}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}();return e.health?r.a.createElement(Ct.a,{columns:u,data:s,defaultPageSize:10,defaultSorted:[{id:"host",desc:!1}],className:"-striped -highlight monitoringOverview"}):null}),ya=[{value:"1m",label:"1 minute"},{value:"5m",label:"5 minutes"},{value:"10m",label:"10 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"},{value:"2h",label:"2 hours"},{value:"5h",label:"5 hours"}],Oa=[{value:"10s",label:"10 seconds"},{value:"30s",label:"30 seconds"},{value:"1m",label:"1 minutes"},{value:"5m",label:"5 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"}],ka={fontSize:11},Ca=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(s)))).state={intervalId:null,timeFrame:null,resolution:null,rawStats:null,preparedStats:null,timeFrameOptions:ya,lastUniqueEntries:null,error:null,uniqueHosts:null,autoRefresh:!1},a.handleTimeFrameChanged=function(e){return a.setState({timeFrame:e},a.queryData)},a.handleResolutionChanged=function(e){return a.setState({resolution:e},a.queryData)},a.handleAutoRefreshChanged=function(e){var t=e.target.checked,n=void 0;t&&!a.state.intervalId?n=setInterval(function(){return a.refreshStats()},1e4):!t&&a.state.intervalId&&clearInterval(a.state.intervalId),a.setState({autoRefresh:t,intervalId:n})},a.renderTooltip=function(e){var t=e.active,n=e.payload,s=e.label;if(t&&n)return r.a.createElement(Aa,{payload:n,uniqueHosts:a.state.uniqueHosts,date:s})},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.setState({timeFrame:ya[3],resolution:Y.a.head(Oa)},this.queryData)}},{key:"componentWillUnmount",value:function(){this.state.intervalId&&clearInterval(this.state.intervalId)}},{key:"componentDidUpdate",value:function(e){e.rawStats!==this.props.rawStats&&this.prepareForDisplay()}},{key:"queryData",value:function(){var e=Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.timeFrame){e.next=2;break}return e.abrupt("return");case 2:try{t=qe()().subtract(ne()(this.state.timeFrame.value)).toDate().getTime(),a=qe()().toDate().getTime(),this.props.fetchStats(t,a)}catch(n){this.setState({error:n.message})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareForDisplay",value:function(){if(this.props.rawStats&&this.props.rawStats.length){var e=Y.a.sortBy(Y.a.uniqBy(Y.a.orderBy(this.props.rawStats,["ts"],["desc"]),"host"),"host"),t=Y.a.map(e,"host");this.setState({uniqueHosts:t,lastUniqueEntries:e});var a=Object(ha.groupEntriesByTime)(this.props.rawStats,this.state.resolution.value);if(a){var n=Object(ha.mergeEntriesByTime)(a,t);this.setState({preparedStats:n})}}}},{key:"refreshStats",value:function(){this.props.refreshStats(),this.props.fetchBotStatus()}},{key:"renderOverview",value:function(){var e=this,t=[];return this.state.lastUniqueEntries.forEach(function(a){t.push(Object(x.a)({host:a.host,uptime:a.uptime},Object(ha.calculateOverviewForHost)(Y.a.filter(e.props.rawStats,function(e){return e.host===a.host}))))}),r.a.createElement(Ea,{data:t})}},{key:"renderCpu",value:function(){return r.a.createElement(ga.g,{height:300},r.a.createElement(ga.f,{data:this.state.preparedStats},r.a.createElement(ga.b,{strokeDasharray:"3 3"}),r.a.createElement(ga.i,{dataKey:"ts",tickFormatter:function(e){return qe()(e).format("HH:mm")},scale:"time",tick:ka}),r.a.createElement(ga.j,{domain:[0,100],unit:"%",tick:ka,width:50}),r.a.createElement(ga.j,{yAxisId:"r",orientation:"right",width:30}),r.a.createElement(ga.h,{content:this.renderTooltip}),r.a.createElement(ga.d,null),r.a.createElement(ga.e,{name:"Memory Usage",dataKey:"summary.mem.usage",unit:"%",stroke:"#1C4E80",strokeWidth:2,dot:!1,activeDot:{r:5}}),r.a.createElement(ga.e,{name:"CPU Usage",dataKey:"summary.cpu.usage",unit:"%",stroke:"#0091D5",strokeWidth:2,dot:!1,activeDot:{r:5}})))}},{key:"renderMeasures",value:function(){return r.a.createElement(ga.g,{height:300},r.a.createElement(ga.c,{data:this.state.preparedStats},r.a.createElement(ga.b,{strokeDasharray:"3 3"}),r.a.createElement(ga.i,{dataKey:"ts",tickFormatter:function(e){return qe()(e).format("HH:mm")},tick:ka}),r.a.createElement(ga.j,{yAxisId:"l",domain:[0,"dataMax"],tick:ka,width:50}),r.a.createElement(ga.j,{yAxisId:"r",domain:[0,"dataMax"],tick:ka,width:30,orientation:"right"}),r.a.createElement(ga.h,{content:this.renderTooltip}),r.a.createElement(ga.d,null),r.a.createElement(ga.a,{stackId:"stack",yAxisId:"l",name:"HTTP Requests",dataKey:"summary.requests.count",fill:"#1C4E80"}),r.a.createElement(ga.a,{stackId:"stack",yAxisId:"l",name:"Events In",dataKey:"summary.eventsIn.count",fill:"#7E909A"}),r.a.createElement(ga.a,{stackId:"stack",yAxisId:"l",name:"Events Out",dataKey:"summary.eventsOut.count",fill:"#6AB187"}),r.a.createElement(ga.e,{yAxisId:"r",name:"Warnings",dataKey:"summary.warnings.count",stroke:"#DBAE58",strokeWidth:2,dot:!1}),r.a.createElement(ga.e,{yAxisId:"r",name:"Errors",dataKey:"summary.errors.count",stroke:"#AC3E31",strokeWidth:2,dot:!1})))}},{key:"renderCharts",value:function(){return this.state.preparedStats?r.a.createElement("div",{className:"monitoring"},r.a.createElement(F.a,null,r.a.createElement(M.a,{md:6},r.a.createElement("h5",null,"CPU & Memory Usage (average)"),this.renderCpu()),r.a.createElement(M.a,{md:6},r.a.createElement("h5",null,"Metrics (total)"),this.renderMeasures())),r.a.createElement(F.a,null,r.a.createElement(M.a,{md:12},r.a.createElement("h5",null,"Overview"),this.renderOverview())),r.a.createElement(F.a,null,r.a.createElement(M.a,{md:12},r.a.createElement("h5",null,"Bot Health"),r.a.createElement(wa,null)))):null}},{key:"renderHeader",value:function(){var e={control:function(e){return Object(x.a)({},e,{minHeight:30})},dropdownIndicator:function(e){return Object(x.a)({},e,{padding:4})},clearIndicator:function(e){return Object(x.a)({},e,{padding:4})},valueContainer:function(e){return Object(x.a)({},e,{padding:"0px 6px"})},input:function(e){return Object(x.a)({},e,{margin:0,padding:0})}};return r.a.createElement("div",{className:"monitoring-toolbar"},r.a.createElement("div",{className:"monitoring-toolbar-item",style:{marginLeft:"auto"}},r.a.createElement("strong",null,"Time Frame"),r.a.createElement(L.a,{styles:e,options:ya,value:this.state.timeFrame,onChange:this.handleTimeFrameChanged,isSearchable:!1})),r.a.createElement("div",{className:"monitoring-toolbar-item"},r.a.createElement("strong",null,"Resolution"),r.a.createElement(L.a,{styles:e,options:Oa,value:this.state.resolution,onChange:this.handleResolutionChanged,isSearchable:!1})),r.a.createElement("div",null,r.a.createElement("strong",null,"Auto-Refresh"),r.a.createElement("br",null),r.a.createElement(H.a,null,r.a.createElement("input",{style:{marginTop:8},name:"autoRefresh",type:"checkbox",checked:this.state.autoRefresh,onChange:this.handleAutoRefreshChanged})," ",r.a.createElement("strong",null,"Enabled"))))}},{key:"renderNoStats",value:function(){return r.a.createElement(bt.a,null,r.a.createElement(F.a,null,r.a.createElement(M.a,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(At.a,null),"\xa0 Monitoring is enabled, however there is no statistics to display."),r.a.createElement("p",null,"Make sure your Redis configuration is correct (and that you have restarted the server if you just made the change)."))))}},{key:"renderChild",value:function(){return this.props.loading?r.a.createElement(kt,null):this.props.rawStats&&this.props.rawStats.length?r.a.createElement(n.Fragment,null,this.renderHeader(),this.renderCharts()):this.renderNoStats()}},{key:"render",value:function(){return r.a.createElement(ct,{title:"Server Monitoring",fullWidth:!0,superAdmin:!0},r.a.createElement(wt,{requirements:["redis","pro"],feature:"monitoring"},this.renderChild()))}}]),t}(n.Component),xa={fetchStats:function(e,t){return function(){var a=Object(C.a)(k.a.mark(function a(n){var r,s;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"monitoring/FETCH_STATS_FULL_REQUESTED"}),a.next=3,Oe.getSecured().post("/admin/server/monitoring",{fromTime:e,toTime:t});case 3:r=a.sent,s=r.data,n({type:"monitoring/FETCH_STATS_FULL_RECEIVED",stats:s&&s.map(JSON.parse),toTime:t});case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},refreshStats:function(){return function(){var e=Object(C.a)(k.a.mark(function e(t,a){var n,r,s,o,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.monitoring,s=qe()().toDate().getTime(),e.next=4,Oe.getSecured().post("/admin/server/monitoring",{fromTime:r.lastDate,toTime:s});case 4:o=e.sent,c=o.data,t({type:"bots/FETCH_STATS_PARTIAL_RECEIVED",stats:c&&c.map(JSON.parse),toTime:s});case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},fetchBotStatus:Re},Ra=Object(i.b)(function(e){return{rawStats:e.monitoring.stats,lastDate:e.monitoring.lastDate,loading:e.monitoring.loading}},xa)(Ca),Ia=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(""),s=Object(vt.a)(a,2),o=s[0],c=s[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=function(){var a=Object(C.a)(k.a.mark(function a(n,r){var s,o,i,l=arguments;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=l.length>2&&void 0!==l[2]?l[2]:"get",a.next=3,Oe.getSecured({timeout:ne()("10m")})({method:s,url:n,responseType:"blob"});case 3:o=a.sent,i=o.data,c(window.URL.createObjectURL(new Blob([i]))),d(r),t.current.click(),e.onDownloadCompleted&&e.onDownloadCompleted();case 9:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}();return Object(n.useEffect)(function(){e.url&&e.filename&&m(e.url,e.filename)},[e.url]),r.a.createElement("a",{ref:t,href:o,download:u})},Sa=function(){var e=Object(n.useState)(""),t=Object(vt.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(!1),i=Object(vt.a)(o,2),l=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(c.b,{id:"btn-downloadArchive",icon:"download",onClick:function(){u(!0),s("/admin/versioning/export")},disabled:l,text:l?"Please wait...":"Download archive"}),r.a.createElement(Ia,{url:a,filename:"archive.tgz",onDownloadCompleted:function(){u(!1),te("Archive ready")}}))},Na=function(){var e=Object(C.a)(k.a.mark(function e(t,a){var n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured({timeout:6e4}).post("/admin/versioning/".concat(a?"update":"changes"),t,{headers:{"Content-Type":"application/tar+gzip"}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Ta=function(e){return Na(e,!1)},ja=function(e){return Na(e,!0)},Da=function(e){var t=Y.a.flatten(e.map(function(e){return e.changes}));return{localFiles:Y.a.flatten(e.map(function(e){return e.localFiles})),blockingChanges:t.filter(function(e){return["del","edit"].includes(e.action)}),changeList:t}},Ba=function(e){var t=e.action,a=e.path,n=e.add,r=e.del;return"add"===t?" + ".concat(a):"del"===t?" - ".concat(a):"edit"===t?" o ".concat(a," (+").concat(n," / -").concat(r,")"):""},Pa=function(){var e=Object(n.useState)(""),t=Object(vt.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(""),i=Object(vt.a)(o,2),l=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(vt.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(!1),g=Object(vt.a)(h,2),A=g[0],b=g[1],E=Object(n.useState)(!1),v=Object(vt.a)(E,2),w=v[0],y=v[1],O=Object(n.useState)(""),x=Object(vt.a)(O,2),R=x[0],I=x[1],S=function(){var e=Object(C.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),e.prev=1,!A){e.next=8;break}return e.next=5,ja(l);case 5:return T(),$("Changes pushed successfully!"),e.abrupt("return");case 8:return e.t0=Da,e.next=11,Ta(l);case 11:if(e.t1=e.sent,!(t=(0,e.t0)(e.t1).blockingChanges).length){e.next=16;break}return I(t.map(Ba).join("\n")),e.abrupt("return");case 16:return e.next=18,ja(l);case 18:T(),$("Changes pushed successfully!"),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(1),ee(e.t2);case 25:return e.prev=25,f(!1),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[1,22,25,28]])}));return function(){return e.apply(this,arguments)}}(),N=function(e){if(e){var t=new FileReader;t.readAsArrayBuffer(e[0]),t.onload=function(e){u(Y.a.get(e,"target.result"))},s(e[0].name)}},T=function(){s(""),u(""),I(""),y(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(c.b,{icon:"upload",id:"btn-uploadArchive",text:"Upload archive",onClick:function(){return y(!0)}}),r.a.createElement(c.h,{title:"Upload Archive",icon:"import",isOpen:w,onClose:T,transitionDuration:0,canOutsideClickClose:!1,style:{width:R?800:500}},R?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement("div",null,r.a.createElement(c.k,null,"Conflict warning"),r.a.createElement("p",null,'Remote has changes that are not synced to your environment. Backup your changes and use "pull" to get those changes on your file system. If you still want to overwrite remote changes, turn on the switch "Force push my changes" then press the button'),r.a.createElement(c.D,{value:R,rows:22,cols:120}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.z,{id:"chk-useForce",checked:A,onChange:function(){return b(!A)},label:"Force push my changes",style:{margin:"3px 20px 0 20px"}}),r.a.createElement(c.b,{id:"btn-upload",text:p?"Please wait...":"Upload",disabled:!A||p,onClick:S,intent:_.a.PRIMARY,style:{height:20,marginLeft:5}}))))):r.a.createElement("div",{onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault(),N(e.dataTransfer.files)}},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:r.a.createElement("span",null,"Server Archive"),labelFor:"input-archive",helperText:r.a.createElement("span",null,"Select an archive exported from another server. If there are conflicts, you will be able to review them before pushing.")},r.a.createElement(c.i,{text:a||"Choose file...",onChange:function(e){return N(e.target.files)},inputProps:{accept:".tgz"},fill:!0}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-push",text:p?"Please wait...":"Push changes",disabled:!a||!l||p,onClick:S,intent:_.a.PRIMARY,style:{height:20,marginLeft:5}})))))))},La=Object(i.b)(function(e){return{profile:e.user.profile}},{})(function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(vt.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)(function(){var e=-1!==navigator.appVersion.indexOf("Win")?"bp.exe":"./bp",t=fe().token,a=window.location.origin;o("".concat(e," pull --url ").concat(a).concat(window.ROOT_PATH," --authToken ").concat(t," --targetDir data")),d("".concat(e," push --url ").concat(a).concat(window.ROOT_PATH," --authToken ").concat(t," --sourceDir data")),g()},[]);var g=function(){var e=Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/versioning/bpfs_status");case 2:t=e.sent,a=t.data,h(a.isAvailable);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=e.profile&&e.profile.isSuperAdmin,b=function(){return te("Copied to clipboard")};return r.a.createElement(ct,{title:"Source Control",superAdmin:!0},r.a.createElement(c.d,{title:"Pull remote to file system"},r.a.createElement("p",null,"Use this command to copy the remote data on your local file system."),r.a.createElement(c.F,{content:"Click to copy to clipboard",position:J.a.RIGHT},r.a.createElement(sa.a,{text:s,onCopy:b},r.a.createElement("div",{style:{cursor:"pointer",outline:"none"}},r.a.createElement("code",null,s)))),r.a.createElement("br",null)," ",r.a.createElement("br",null),A&&r.a.createElement(Sa,null)),r.a.createElement("br",null),!f&&r.a.createElement(c.d,{title:"Push local to this server"},r.a.createElement("p",null,'Pushing local changes to a remote server is only possible when using the BPFS Storage "Database". ',r.a.createElement("br",null),r.a.createElement("br",null),"Check out the"," ",r.a.createElement("a",{href:"https://botpress.com/docs/next/advanced/versions/",target:"_blank"},r.a.createElement("b",null,"documentation"))," ","for more information.")),f&&r.a.createElement(c.d,{title:"Push local to this server"},r.a.createElement("p",null,"If you are using the database storage for BPFS, you can also push your local changes to the database using this command:"),r.a.createElement(c.F,{content:"Click to copy to clipboard",position:J.a.RIGHT},r.a.createElement(sa.a,{text:u,onCopy:b},r.a.createElement("div",{style:{cursor:"pointer",outline:"none"}},r.a.createElement("code",null,u)))),r.a.createElement("br",null)," ",r.a.createElement("br",null),A&&r.a.createElement(Pa,null)))}),Fa=a(191);function Ma(e,t,a){return a?(a=a.toLowerCase(),e.filter(function(e){return t.find(function(t){return Y.a.get(e,t,"").toLowerCase().includes(a)})})):e}var Ua=function(e){var t=e.bot,a=e.hasError,n=e.deleteBot,s=e.exportBot,o=e.createRevision,i=e.rollback,l=e.reloadBot,u="".concat(window.location.origin+window.ROOT_PATH,"/s/").concat(t.id),d=st()?u:"studio/".concat(t.id);return r.a.createElement("div",{className:"bp_table-row",key:t.id},r.a.createElement("div",{className:"actions"},a&&r.a.createElement(c.a,{text:"Reload",icon:"refresh",onClick:l,minimal:!0}),r.a.createElement(ot,{resource:"admin.bots.*",operation:"write"},r.a.createElement(c.b,{text:"Config",icon:"cog",minimal:!0,className:"configBtn",onClick:function(){return le.push("bots/".concat(t.id))}})),!t.disabled&&!a&&r.a.createElement(c.a,{text:"Open chat",icon:"chat",href:u,target:"_blank",minimal:!0}),r.a.createElement(ot,{resource:"admin.bots.*",operation:"read"},r.a.createElement(c.s,{minimal:!0,position:J.a.BOTTOM,interactionKind:c.t.HOVER},r.a.createElement(c.b,{id:"btn-menu",icon:r.a.createElement(c.l,{icon:"menu"}),minimal:!0}),r.a.createElement(c.n,null,!t.disabled&&!a&&r.a.createElement(c.p,{disabled:t.locked,icon:"edit",text:"Edit in Studio",href:d}),r.a.createElement(ra.CopyToClipboard,{text:u,onCopy:function(){return te("Copied to clipboard")}},r.a.createElement(c.p,{icon:"link",text:"Copy link to clipboard"})),r.a.createElement(ot,{resource:"admin.bots.*",operation:"write"},r.a.createElement(c.p,{text:"Create Revision",icon:"cloud-upload",id:"btn-createRevision",onClick:o}),r.a.createElement(c.p,{text:"Rollback",icon:"undo",id:"btn-rollbackRevision",onClick:i}),r.a.createElement(c.p,{text:"Export",icon:"export",id:"btn-export",onClick:s}),r.a.createElement(c.p,{text:"Delete",icon:"trash",id:"btn-delete",onClick:n})))))),r.a.createElement("div",{className:"title"},t.locked&&r.a.createElement("span",null,r.a.createElement(c.l,{icon:"lock",intent:_.a.PRIMARY,iconSize:13}),"\xa0"),t.disabled?r.a.createElement("span",null,t.name||t.id):r.a.createElement("a",{href:d},t.name||t.id),!t.defaultLanguage&&r.a.createElement(c.F,{position:"right",content:"Bot language is missing. Please set it in bot config."},r.a.createElement(c.l,{icon:"warning-sign",intent:_.a.DANGER,style:{marginLeft:10}})),t.disabled&&r.a.createElement(c.C,{intent:_.a.WARNING,className:"botbadge"},"disabled"),t.private&&r.a.createElement(c.C,{intent:_.a.PRIMARY,className:"botbadge"},"private"),a&&r.a.createElement(c.C,{intent:_.a.DANGER,className:"botbadge"},"error")),r.a.createElement("p",null,t.description))},Ha=function(e){var t=e.bot,a=e.hasError,s=e.requestStageChange,o=e.deleteBot,i=e.exportBot,l=e.allowStageChange,u=e.createRevision,d=e.rollback,m=e.reloadBot,p="".concat(window.location.origin+window.ROOT_PATH,"/s/").concat(t.id),f=st()?p:"studio/".concat(t.id);return r.a.createElement("div",{className:"pipeline_bot",key:t.id},r.a.createElement("div",{className:"actions"},r.a.createElement(ot,{resource:"admin.bots.*",operation:"read"},r.a.createElement(c.s,{minimal:!0,position:J.a.BOTTOM,interactionKind:c.t.HOVER},r.a.createElement(c.b,{id:"btn-menu",icon:r.a.createElement(c.l,{icon:"menu"}),minimal:!0}),r.a.createElement(c.n,null,!t.disabled&&!a&&r.a.createElement(n.Fragment,null,r.a.createElement(c.p,{icon:"chat",text:"Open chat",href:p}),r.a.createElement(c.p,{disabled:t.locked,icon:"edit",text:"Edit in Studio",href:f})),r.a.createElement(ra.CopyToClipboard,{text:p,onCopy:function(){return te("Copied to clipboard")}},r.a.createElement(c.p,{icon:"link",text:"Copy link to clipboard"})),r.a.createElement(c.o,null),l&&r.a.createElement(c.p,{text:"Promote to next stage",icon:"double-chevron-right",id:"btn-promote",onClick:s}),r.a.createElement(ot,{resource:"admin.bots.*",operation:"write"},r.a.createElement(c.p,{text:"Config",icon:"cog",id:"btn-config",onClick:function(){return le.push("bots/".concat(t.id))}}),r.a.createElement(c.p,{text:"Create Revision",icon:"cloud-upload",id:"btn-createRevision",onClick:u}),r.a.createElement(c.p,{text:"Rollback",icon:"undo",id:"btn-rollbackRevision",onClick:d}),r.a.createElement(c.p,{text:"Export",icon:"export",id:"btn-export",onClick:i}),r.a.createElement(c.p,{text:"Delete",icon:"trash",id:"btn-delete",onClick:o}),a&&r.a.createElement(c.p,{text:"Reload",icon:"refresh",onClick:m})))))),r.a.createElement("div",{className:"title"},t.locked&&r.a.createElement("span",null,r.a.createElement(c.l,{icon:"lock",intent:_.a.PRIMARY,iconSize:13}),"\xa0"),t.disabled?r.a.createElement("span",null,t.name):r.a.createElement("a",{href:f},t.name),!t.defaultLanguage&&r.a.createElement(c.F,{position:"right",content:"Bot language is missing. Please set it in bot config."},r.a.createElement(c.l,{icon:"warning-sign",intent:_.a.DANGER,style:{marginLeft:10}}))),r.a.createElement("p",null,t.description),r.a.createElement("div",null,t.disabled&&r.a.createElement(c.C,{intent:_.a.WARNING,className:"botbadge"},"disabled"),t.private&&r.a.createElement(c.C,{intent:_.a.PRIMARY,className:"botbadge"},"private"),a&&r.a.createElement(c.C,{intent:_.a.DANGER,className:"botbadge"},"error"),t.pipeline_status.stage_request&&r.a.createElement(c.F,{content:r.a.createElement("div",null,r.a.createElement("p",null,"Requested by: ",t.pipeline_status.stage_request.requested_by," ",r.a.createElement("br",null),"on\xa0",new Date(t.pipeline_status.stage_request.requested_on).toLocaleDateString()),t.pipeline_status.stage_request.message&&r.a.createElement("p",null,t.pipeline_status.stage_request.message))},r.a.createElement(c.C,{className:"botbadge",id:"status-badge"},t.pipeline_status.stage_request.status))))},Va=function(e){return e.toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9_-]/g,"")},qa={botId:"",botName:"",selectedCategory:void 0,selectedTemplate:void 0,error:void 0,isProcessing:!1,generateId:!0},Qa=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r))))._form=null,a.state=Object(x.a)({templates:[],categories:[]},qa),a.handleNameChanged=function(e){var t=e.target.value;a.setState({botName:t,botId:a.state.generateId?Va(t):a.state.botId})},a.handleBotIdChanged=function(e){return a.setState({botId:Va(e.target.value),generateId:!1})},a.createBot=function(){var e=Object(C.a)(k.a.mark(function e(t){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.isButtonDisabled){e.next=3;break}return e.abrupt("return");case 3:return a.setState({isProcessing:!0}),n={id:a.state.botId,name:a.state.botName,template:Y.a.pick(a.state.selectedTemplate,["id","moduleId"]),category:a.state.selectedCategory&&a.state.selectedCategory.value},e.prev=5,e.next=8,Oe.getSecured().post("/admin/bots",n);case 8:a.props.onCreateBotSuccess(),a.toggleDialog(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),a.setState({error:e.t0.message,isProcessing:!1});case 15:case"end":return e.stop()}},e,null,[[5,12]])}));return function(t){return e.apply(this,arguments)}}(),a.toggleDialog=function(){a.setState(Object(x.a)({},qa)),a.props.toggle()},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.loadCategories(),this.loadTemplates()}},{key:"componentDidUpdate",value:function(e){!e.botTemplatesFetched&&this.props.botTemplatesFetched&&this.loadTemplates(),!e.botCategoriesFetched&&this.props.botCategoriesFetched&&this.loadCategories()}},{key:"loadCategories",value:function(){if(!this.props.botCategoriesFetched)return this.props.fetchBotCategories();var e=this.props.botCategories.map(function(e){return{value:e,label:e}});this.setState({categories:e,selectedCategory:void 0})}},{key:"loadTemplates",value:function(){if(!this.props.botTemplatesFetched)return this.props.fetchBotTemplates();var e=Y.a.groupBy(this.props.botTemplates,"moduleName"),t=Y.a.toPairs(e).map(function(e){return{label:e[0],options:e[1]}});this.setState({templates:t,selectedTemplate:void 0})}},{key:"render",value:function(){var e=this;return r.a.createElement(c.h,{title:"Create a new bot",icon:"add",isOpen:this.props.isOpen,onClose:this.toggleDialog,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("form",{ref:function(t){return e._form=t}},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:"Bot Name",labelFor:"bot-name",labelInfo:"*",helperText:'It will be displayed to your visitors. You can change it anytime. If you put nothing, it will be named\n            "Bot" by default.'},r.a.createElement(c.m,{id:"input-bot-name",tabIndex:1,placeholder:"The name of your bot",minLength:3,required:!0,value:this.state.botName,onChange:this.handleNameChanged,autoFocus:!0})),r.a.createElement(c.j,{label:"Bot ID",labelFor:"botid",labelInfo:"*",helperText:"This ID cannot be changed, so choose wisely. It will be displayed in the URL and your visitors can see it. Special characters are not allowed. Minimum length: 3"},r.a.createElement(c.m,{id:"botid",tabIndex:2,placeholder:"The ID of your bot (must be unique)",minLength:3,required:!0,value:this.state.botId,onChange:this.handleBotIdChanged})),this.state.templates.length>0&&r.a.createElement(c.j,{label:"Bot Template",labelFor:"template"},r.a.createElement(L.a,{id:"select-bot-templates",tabIndex:"3",options:this.state.templates,value:this.state.selectedTemplate,onChange:function(t){return e.setState({selectedTemplate:t})},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})),this.state.categories.length>0&&r.a.createElement(c.j,{label:"Bot Category"},r.a.createElement(L.a,{tabIndex:"4",options:this.state.categories,value:this.state.selectedCategory,onChange:function(t){return e.setState({selectedCategory:t})}}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},!!this.state.error&&r.a.createElement("p",{className:"text-danger"},this.state.error),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-modal-create-bot",type:"submit",text:this.state.isProcessing?"Please wait...":"Create Bot",onClick:this.createBot,disabled:this.isButtonDisabled,intent:_.a.PRIMARY})))))}},{key:"isButtonDisabled",get:function(){var e=this.state,t=e.isProcessing,a=e.botId,n=e.botName,r=e.selectedTemplate;return t||!a||!n||!r||!this._form||!this._form.checkValidity()}}]),t}(n.Component),Za={fetchBotTemplates:function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/modules/botTemplates");case 2:a=e.sent,n=a.data,t({type:"bots/RECEIVED_BOT_TEMPLATES",templates:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},fetchBotCategories:Ce},za=Object(i.b)(function(e){return Object(x.a)({},e.bots)},Za)(Qa),Ya={botId:"",error:null,filePath:null,fileContent:null,isIdTaken:!1,isProcessing:!1},Wa=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r))))._form=null,a.state=Object(x.a)({},Ya),a.importBot=function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.isButtonDisabled){e.next=3;break}return e.abrupt("return");case 3:return a.setState({isProcessing:!0}),e.prev=4,e.next=7,Oe.getSecured({timeout:6e4}).post("/admin/bots/".concat(a.state.botId,"/import"),a.state.fileContent,{headers:{"Content-Type":"application/tar+gzip"}});case 7:a.props.onCreateBotSuccess(),a.toggleDialog(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),a.setState({error:e.t0.message,isProcessing:!1});case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}(),a.checkIdAvailability=Y.a.debounce(Object(C.a)(k.a.mark(function e(){var t,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.botId){e.next=2;break}return e.abrupt("return",a.setState({isIdTaken:!1}));case 2:return e.prev=2,e.next=5,Oe.getSecured().get("/admin/bots/".concat(a.state.botId,"/exists"));case 5:t=e.sent,n=t.data,a.setState({isIdTaken:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a.setState({error:e.t0.message});case 13:case"end":return e.stop()}},e,null,[[2,10]])})),500),a.handleBotIdChanged=function(e){return a.setState({botId:Va(e.target.value)},a.checkIdAvailability)},a.handleFileChanged=function(e){if(e){var t=new FileReader;t.readAsArrayBuffer(e[0]),t.onload=function(e){a.setState({fileContent:Y.a.get(e,"target.result")})},a.setState({filePath:e[0].name}),a.state.botId.length||a.generateBotId(e[0].name)}},a.generateBotId=function(e){var t=e.substr(0,e.indexOf(".")),n=t.match(/bot_(.*)_[0-9]+/);a.setState({botId:Va(n&&n[1]||t)})},a.toggleDialog=function(){a.setState(Object(x.a)({},Ya)),a.props.toggle()},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(c.h,{title:"Import bot from archive",icon:"import",isOpen:this.props.isOpen,onClose:this.toggleDialog,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("form",{ref:function(t){return e._form=t},onDragOver:function(e){return e.preventDefault()},onDrop:function(t){t.preventDefault(),e.handleFileChanged(t.dataTransfer.files)}},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:r.a.createElement("span",null,"Bot ID ",this.state.isIdTaken&&r.a.createElement("span",{className:"text-danger"},"Already in use")),labelFor:"input-botId",labelInfo:"*",helperText:"This ID cannot be changed, so choose wisely. It will be displayed in the URL and your visitors can see it. Special characters are not allowed. Minimum length: 4"},r.a.createElement(c.m,{id:"input-botId",tabIndex:1,placeholder:"The ID of your bot",intent:_.a.PRIMARY,minLength:3,value:this.state.botId,onChange:this.handleBotIdChanged,autoFocus:!0})),r.a.createElement(c.j,{label:"Bot Archive",labelInfo:"*",labelFor:"archive"},r.a.createElement(c.i,{tabIndex:2,text:this.state.filePath||"Choose file...",onChange:function(t){return e.handleFileChanged(t.target.files)},inputProps:{accept:".zip,.tgz"}}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},!!this.state.error&&r.a.createElement("p",{className:"text-danger"},this.state.error),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-upload",tabIndex:3,type:"submit",text:this.state.isProcessing?"Please wait...":"Import Bot",onClick:this.importBot,disabled:this.isButtonDisabled,intent:_.a.PRIMARY})))))}},{key:"isButtonDisabled",get:function(){var e=this.state,t=e.isProcessing,a=e.botId,n=e.fileContent,r=e.isIdTaken;return t||!a||!n||r||!this._form||!this._form.checkValidity()}}]),t}(n.Component),Ga=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(vt.a)(m,2),f=p[0],h=p[1],g=Object(n.useState)(!1),A=Object(vt.a)(g,2),b=A[0],E=A[1];Object(n.useEffect)(function(){e.botId&&v()},[e.botId]);var v=function(){var t=Object(C.a)(k.a.mark(function t(){var a,n,r;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getSecured().get("/admin/bots/".concat(e.botId,"/revisions"));case 2:a=t.sent,n=a.data,r=n.payload.revisions.map(function(e){var t=e.replace(/\.tgz$/i,"").split("++");return t[1]=new Date(parseInt(t[1],10)).toLocaleString(),{label:t.join(" - "),value:e}}),o(r);case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(!0),t.next=4,Oe.getSecured({timeout:6e4}).post("/admin/bots/".concat(e.botId,"/rollback"),{revision:u.value});case 4:e.onRollbackSuccess(),y(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),ee("Error while rollbacking to a previous version: ".concat(t.t0.message));case 11:return t.prev=11,E(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[0,8,11,14]])}));return function(){return t.apply(this,arguments)}}(),y=function(){o(void 0),d(void 0),h(!1),E(!1),e.toggle()};return r.a.createElement(c.h,{isOpen:e.isOpen,icon:"undo",onClose:y,transitionDuration:0,title:"Rollback bot ".concat(e.botId)},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:"Select revision"},r.a.createElement(L.a,{id:"select-revisions",value:u,options:s,onChange:d,tabIndex:"1",autoFocus:!0})),u&&r.a.createElement(c.d,{intent:_.a.WARNING},"Are you sure you want to rollback the bot to that revision? All existing content, flows, questions, etc. will be overwritten. This can't be undone.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.e,{id:"chk-confirm",tabIndex:2,checked:f,onChange:function(e){return h(e.currentTarget.checked)},label:"Yes, rollback the bot to that version"}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",text:b?"Please wait...":"Rollback",tabIndex:3,onClick:w,disabled:!u||!f||b,intent:_.a.PRIMARY}))))},Ka=["name","id","description"],Xa=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={isCreateBotModalOpen:!1,isRollbackModalOpen:!1,isImportBotModalOpen:!1,focusedBot:null,archiveUrl:void 0,archiveName:"",filter:""},a.toggleCreateBotModal=function(){a.setState({isCreateBotModalOpen:!a.state.isCreateBotModalOpen})},a.toggleImportBotModal=function(){a.setState({isImportBotModalOpen:!a.state.isImportBotModalOpen})},a.hasUnlangedBots=function(){return a.props.bots.reduce(function(e,t){return e||!t.defaultLanguage},!1)},a.isLicensed=function(){return"licensed"===Y.a.get(a.props.licensing,"status")},a.toggleRollbackModal=function(e){a.setState({focusedBot:"string"===typeof e?e:null,isRollbackModalOpen:!a.state.isRollbackModalOpen})},a.handleRollbackSuccess=function(){a.props.fetchBots(),$("Rollback success")},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBots(),this.props.fetchBotHealth(),this.props.licensing||this.props.fetchLicensing()}},{key:"exportBot",value:function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({archiveUrl:"/admin/bots/".concat(t,"/export"),archiveName:"bot_".concat(t,"_").concat(Date.now(),".tgz")});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBot",value:function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt("Are you sure you want to delete this bot? This can't be undone.",{acceptLabel:"Delete",declineLabel:"Cancel"});case 2:if(!e.sent){e.next=6;break}return e.next=5,Oe.getSecured().post("/admin/bots/".concat(t,"/delete"));case 5:this.props.fetchBots();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reloadBot",value:function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.getSecured().post("/admin/bots/".concat(t,"/reload"));case 3:this.props.fetchBots(),this.props.fetchBotHealth(),$("Bot remounted successfully"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),ee("Could not mount bot. Check server logs for details");case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"renderCreateNewBotButton",value:function(){var e=this;return r.a.createElement(ot,{resource:"admin.bots.*",operation:"write"},r.a.createElement(c.s,{minimal:!0,interactionKind:c.t.HOVER,position:J.a.BOTTOM},r.a.createElement(c.b,{id:"btn-create-bot",intent:_.a.NONE,text:"Create Bot",rightIcon:"caret-down"}),r.a.createElement(c.c,{vertical:!0,minimal:!0,fill:!0,alignText:Fa.a.LEFT},r.a.createElement(c.b,{id:"btn-new-bot",text:"New Bot",icon:"add",onClick:function(){return e.setState({isCreateBotModalOpen:!0})}}),r.a.createElement(c.b,{id:"btn-import-bot",text:"Import Existing",icon:"import",onClick:function(){return e.setState({isImportBotModalOpen:!0})}}))))}},{key:"requestStageChange",value:function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured({timeout:6e4}).post("/admin/bots/".concat(t,"/stage"));case 2:this.props.fetchBots(),$("Bot promoted to next stage");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createRevision",value:function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().post("admin/bots/".concat(t,"/revisions"));case 2:$("Revisions created");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"findBotError",value:function(e){return!!this.props.health&&Y.a.some(this.props.health.map(function(t){return t.bots[e]}),function(e){return e&&"error"===e.status})}},{key:"renderCompactView",value:function(e){var t=this;return e.length?r.a.createElement("div",{className:"bp_table bot_views compact_view"},e.map(function(e){return r.a.createElement(n.Fragment,{key:e.id},r.a.createElement(Ua,{bot:e,hasError:t.findBotError(e.id),deleteBot:t.deleteBot.bind(t,e.id),exportBot:t.exportBot.bind(t,e.id),createRevision:t.createRevision.bind(t,e.id),rollback:t.toggleRollbackModal.bind(t,e.id),reloadBot:t.reloadBot.bind(t,e.id)}))})):null}},{key:"renderPipelineView",value:function(e){var t=this,a=this.props.workspace.pipeline,s=Y.a.groupBy(e,"pipeline_status.current_stage.id"),o=Math.floor(12/a.length);return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{className:"pipeline_view bot_views"},a.map(function(e,c){var i=t.isLicensed()&&c!==a.length-1;return r.a.createElement(M.a,{key:e.id,md:o},a.length>1&&r.a.createElement("h3",{className:"pipeline_title"},e.label),0===c&&r.a.createElement("div",{className:"pipeline_bot create"},t.renderCreateNewBotButton()),(s[e.id]||[]).map(function(e){return r.a.createElement(n.Fragment,{key:e.id},r.a.createElement(Ha,{bot:e,hasError:t.findBotError(e.id),allowStageChange:i,requestStageChange:t.requestStageChange.bind(t,e.id),deleteBot:t.deleteBot.bind(t,e.id),exportBot:t.exportBot.bind(t,e.id),createRevision:t.createRevision.bind(t,e.id),rollback:t.toggleRollbackModal.bind(t,e.id),reloadBot:t.reloadBot.bind(t,e.id)}))}))})))}},{key:"renderBots",value:function(){var e=this,t=Ma(this.props.bots,Ka,this.state.filter),a=!!this.props.bots.length,s=this.isPipelineView?this.renderPipelineView(t):this.renderCompactView(t);return r.a.createElement("div",null,a&&r.a.createElement(n.Fragment,null,r.a.createElement(c.m,{id:"input-filter",placeholder:"Filter bots",value:this.state.filter,onChange:function(t){return e.setState({filter:t.target.value.toLowerCase()})},autoComplete:"off",className:"filterField"}),this.state.filter&&!t.length&&r.a.createElement(c.d,{title:"No bot matches your query",className:"filterCallout"})),!a&&r.a.createElement(c.d,{title:"This workspace has no bots, yet",className:"filterCallout"},r.a.createElement("p",null,r.a.createElement("br",null),"In Botpress, bots are always assigned to a workspace.",r.a.createElement("br",null),"Create your first bot to start building.")),this.hasUnlangedBots()&&r.a.createElement(A.a,{color:"warning"},"You have bots without specified language. Default language is mandatory since Botpress 11.8. Please set bot language in the bot config page."),s)}},{key:"render",value:function(){return this.props.bots?r.a.createElement(ct,{title:"Bots"},r.a.createElement(Et,{sideMenu:!this.isPipelineView&&this.renderCreateNewBotButton()},r.a.createElement(n.Fragment,null,r.a.createElement(Ia,{url:this.state.archiveUrl,filename:this.state.archiveName}),this.renderBots(),r.a.createElement(ot,{resource:"admin.bots.*",operation:"write"},r.a.createElement(Ga,{botId:this.state.focusedBot,isOpen:this.state.isRollbackModalOpen,toggle:this.toggleRollbackModal,onRollbackSuccess:this.handleRollbackSuccess}),r.a.createElement(za,{isOpen:this.state.isCreateBotModalOpen,toggle:this.toggleCreateBotModal,onCreateBotSuccess:this.props.fetchBots}),r.a.createElement(Wa,{isOpen:this.state.isImportBotModalOpen,toggle:this.toggleImportBotModal,onCreateBotSuccess:this.props.fetchBots}))))):r.a.createElement(kt,null)}},{key:"isPipelineView",get:function(){return this.props.workspace.pipeline.length>1}}]),t}(n.Component),Ja={fetchBots:xe,fetchLicensing:Te,fetchBotHealth:Re},_a=Object(i.b)(function(e){return{bots:e.bots.bots,health:e.bots.health,workspace:e.bots.workspace,loading:e.bots.loadingBots,licensing:e.license.licensing}},Ja)(Xa),$a=function(e){function t(){return Object(R.a)(this,t),Object(S.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){!this.props.roles.length&&this.props.fetchRoles()}},{key:"renderRoles",value:function(){return r.a.createElement("div",{className:"bp_table"},this.props.roles.map(function(e){return r.a.createElement("div",{className:"bp_table-row",key:e.id},r.a.createElement("div",{className:"title"},e.name),r.a.createElement("p",null,e.description))}))}},{key:"render",value:function(){return r.a.createElement(ct,{title:"Roles",helpText:"To change roles, please see \u201croles\u201d in the workspaces.json file."},this.renderRoles())}}]),t}(n.Component),en={fetchRoles:ze},tn=Object(i.b)(function(e){return{roles:e.roles.roles}},en)($a),an=a(554),nn=a.n(an),rn=function(e){var t=500;"md"===e.size?t=700:"lg"===e.size&&(t=900);return r.a.createElement(c.h,Object.assign({transitionDuration:0,canOutsideClickClose:!1,enforceFocus:!1,style:{width:t}},e),e.onSubmit?r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},e.children):e.children)},sn=function(e){var t=e.children;return r.a.createElement("div",{className:Le()(lt.a.DIALOG_BODY,lt.a.UI_TEXT)},t)},on=function(e){var t=e.children;return r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},t))},cn=a(1226),ln=cn.a.ofType(),un=function(e,t){return"".concat(t.name.toLowerCase()," ").concat(t.id).indexOf(e.toLowerCase())>-1},dn=function(e,t){var a=t.handleClick,n=t.modifiers;return n.matchesPredicate?r.a.createElement(c.p,{className:lt.a.SMALL,active:n.active,disabled:n.disabled,key:e.id,onClick:a,text:e.name}):null},mn=Object(i.b)(function(e){return{roles:e.roles.roles}},{fetchRoles:ze})(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1];Object(n.useEffect)(function(){if(e.roles&&e.roles.length){var t=e.defaultRole&&e.roles.find(function(t){return t.id===e.defaultRole});i(t||e.roles[0])}else e.fetchRoles()},[e.roles]);var i=function(t){t&&(o(t),e.onChange(t))};return e.roles&&s?r.a.createElement(ln,{items:e.roles,itemPredicate:un,itemRenderer:dn,activeItem:s,popoverProps:{minimal:!0},noResults:r.a.createElement(c.p,{disabled:!0,text:"No results."}),onItemSelect:function(e){return i(e)},onActiveItemChange:function(e){return i(e)}},r.a.createElement(c.b,{id:"select-role",text:s.name,rightIcon:"double-caret-vertical"})):null}),pn=cn.a.ofType(),fn=function(e,t){var a=t.label&&t.label.toLowerCase();return"".concat(a," ").concat(t.strategyId).indexOf(e.toLowerCase())>-1},hn=function(e,t){var a=t.handleClick,n=t.modifiers;return n.matchesPredicate?r.a.createElement(c.p,{className:lt.a.SMALL,active:n.active,disabled:n.disabled,key:e.strategyId,onClick:a,text:e.label||e.strategyId}):null},gn=Object(i.b)(function(e){return{authConfig:e.user.authConfig}},{fetchAuthConfig:Xe})(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1];Object(n.useEffect)(function(){e.authConfig?e.authConfig.length&&i(e.authConfig[0]):e.fetchAuthConfig()},[e.authConfig]);var i=function(t){t&&(o(t),e.onChange(t))};return e.authConfig&&s?r.a.createElement(pn,{items:e.authConfig,itemPredicate:fn,itemRenderer:hn,activeItem:s,popoverProps:{minimal:!0},noResults:r.a.createElement(c.p,{disabled:!0,text:"No results."}),onItemSelect:function(e){return i(e)},onActiveItemChange:function(e){return i(e)}},r.a.createElement(c.b,{text:s.label||s.strategyId,rightIcon:"double-caret-vertical"})):null}),An={fetchAvailableUsers:function(e){var t=e&&"?roles=".concat(e)||"";return function(){var e=Object(C.a)(k.a.mark(function e(a){var n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/users/listAvailableUsers".concat(t));case 2:n=e.sent,r=n.data,a({type:"user/AVAILABLE_USERS_RECEIVED",availableUsers:r.payload});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},bn=Object(i.b)(function(e){return{availableUsers:e.user.availableUsers}},An)(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),p=Object(vt.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)(function(){e.fetchAvailableUsers(),h(void 0)},[e.isOpen]);var g=f&&f.__isNew__,A=f&&s&&(!g||g&&u),b=function(){var t=Object(C.a)(k.a.mark(function t(){var a,n,r,o,c;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f&&s){t.next=2;break}return t.abrupt("return");case 2:if(!g){t.next=12;break}if(u){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Oe.getSecured().post("/admin/users",{email:f.value,strategy:u.strategyId,role:s.id});case 7:a=t.sent,n=a.data,e.onUserCreated&&e.onUserCreated(n.payload),t.next=16;break;case 12:return r=f.value,o=r.email,c=r.strategy,t.next=15,Oe.getSecured().post("/admin/users/workspace/add",{email:o,strategy:c,role:s.id});case 15:e.onUserAdded&&e.onUserAdded();case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(C.a)(k.a.mark(function t(a){var n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.length&&e.availableUsers){t.next=2;break}return t.abrupt("return");case 2:return n=a.toLowerCase(),t.abrupt("return",e.availableUsers.filter(function(e){return e.email.toLowerCase().includes(n)}).map(function(e){return{label:"".concat(e.email," (").concat(e.strategy,")"),value:e}}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(rn,{title:"Add Collaborator",icon:"add",isOpen:e.isOpen,onClose:e.toggleOpen,onSubmit:b},r.a.createElement(sn,null,r.a.createElement(c.j,{label:"Email",labelFor:"select-email",helperText:"Invite an existing user, or type his e-mail address and press Enter"},r.a.createElement(nn.a,{id:"select-email",cacheOptions:!0,defaultOptions:!0,value:f,loadOptions:E,onChange:function(e){return h(e)},autoFocus:!0})),g&&r.a.createElement(c.j,{label:"Authentication Strategy",labelFor:"select-strategy"},r.a.createElement(gn,{onChange:function(e){return d(e)}})),r.a.createElement(c.j,{label:"Choose a role for that user",labelFor:"select-role"},r.a.createElement(mn,{onChange:function(e){return o(e)}}))),r.a.createElement(on,null,r.a.createElement(c.b,{id:"btn-submit",className:"float-right",type:"submit",text:g?"Create account":"Add to workspace",disabled:!A})))}),En=function(e){var t={newAccount:"Your botpress account is ready!\n\n  Sign-in here: ".concat(window.location.origin,"/admin/login\n  Email: ").concat(e.email,"\n  Password: ").concat(e.password),passwordReset:"Your password has been reset.\n\n    Email: ".concat(e.email,"\n    Password: ").concat(e.password)};return t[e.messageId]?r.a.createElement(rn,{title:"newAccount"===e.messageId?"Account Created":"Password Reset",icon:"info-sign",isOpen:e.isOpen,onClose:e.toggle},r.a.createElement(sn,null,r.a.createElement(c.u,null,t[e.messageId])),r.a.createElement(on,null,r.a.createElement(ra.CopyToClipboard,{text:t[e.messageId],onCopy:function(){return te("Copied to clipboard")}},r.a.createElement(c.b,{text:"Copy message to clipboard"})),r.a.createElement(ra.CopyToClipboard,{text:e.password,onCopy:function(){return te("Copied to clipboard")}},r.a.createElement(c.b,{text:"Copy password to clipboard",intent:_.a.PRIMARY})))):null},vn=a(161),wn=Object(i.b)(function(e){return{roles:e.roles.roles,authConfig:e.user.authConfig}},{})(function(e){var t=e.user,a=function(){var a=Object(C.a)(k.a.mark(function a(){var n,r;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,dt("Are you sure you want to reset ".concat(t.email,"'s password?"),{acceptLabel:"Reset"});case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.prev=4,a.next=7,Oe.getSecured().get("/admin/users/reset/".concat(t.strategy,"/").concat(t.email));case 7:n=a.sent,r=n.data,$("Password reset successful"),e.onPasswordReset(t.email,r.payload.tempPassword),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(4),ee("Could not reset password: ".concat(a.t0.message));case 16:case"end":return a.stop()}},a,null,[[4,13]])}));return function(){return a.apply(this,arguments)}}(),n=function(){var a=Object(C.a)(k.a.mark(function a(){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,dt("Are you sure you want to delete ".concat(t.email,"'s account?"),{acceptLabel:"Delete"});case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.prev=4,a.next=7,Oe.getSecured().post("/admin/users/".concat(t.strategy,"/").concat(t.email,"/delete"));case 7:$("User ".concat(t.email," was deleted successfully")),e.onUserUpdated(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),ee("Could not delete user: ".concat(a.t0.message));case 14:case"end":return a.stop()}},a,null,[[4,11]])}));return function(){return a.apply(this,arguments)}}(),s=function(){var a=Object(C.a)(k.a.mark(function a(){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,dt("Are you sure you want to remove ".concat(t.email," from this workspace?"),{acceptLabel:"Remove"});case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.prev=4,a.next=7,Oe.getSecured().post("/admin/users/workspace/remove/".concat(t.strategy,"/").concat(t.email,"/delete"));case 7:$("User ".concat(t.email," was removed from workspace successfully")),e.onUserUpdated(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),ee("Could not remove user from workspace: ".concat(a.t0.message));case 14:case"end":return a.stop()}},a,null,[[4,11]])}));return function(){return a.apply(this,arguments)}}(),o=function(){var t=Object(C.a)(k.a.mark(function t(a){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/users/workspace/update_role",Object(x.a)({},e.user,{role:a}));case 3:$("Role updated successfully"),e.onUserUpdated(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ee("Could not update role: ".concat(t.t0.message));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}();if(!e.authConfig||!e.user)return null;var i=e.authConfig.find(function(e){return e.strategyId===t.strategy}),l=i&&"basic"===i.strategyType;return r.a.createElement(c.s,{minimal:!0,position:J.a.BOTTOM,interactionKind:c.t.HOVER},r.a.createElement(c.b,{id:"btn-menu",rightIcon:"caret-down",text:"Action"}),r.a.createElement(c.n,null,l&&r.a.createElement(c.p,{text:"Reset Password",onClick:a,icon:"key",key:"reset",id:"btn-resetPassword"}),r.a.createElement(c.p,{id:"btn-changeRole",text:"Change Role",icon:"people"},e.roles.map(function(e){return r.a.createElement(c.p,{text:e.name,key:e.id,id:"btn-role-".concat(e.id),disabled:t.role===e.id,icon:t.role===e.id?"arrow-right":"dot",onClick:function(){return o(e.id)},tagName:"button"})})),r.a.createElement(c.o,null),r.a.createElement(c.p,{text:"Remove from workspace",onClick:s,icon:"remove",key:"remove",id:"btn-removeUser"}),r.a.createElement(c.p,{text:"Delete",onClick:n,icon:"trash",key:"delete",id:"btn-deleteUser",intent:_.a.DANGER})))}),yn=function(e){var t=e.user,a=e.showPicture,n=e.currentUserEmail,s=e.onUserUpdated,o=e.onPasswordReset;return r.a.createElement("div",{className:"bp_table-row bp_users-list",key:"user-"+t.email},r.a.createElement("div",{style:{display:"flex"}},a&&r.a.createElement("div",{className:"bp_users-picture"},r.a.createElement("img",{src:t.attributes.picture_url})),r.a.createElement("div",{className:"pullLeft details"},r.a.createElement("div",{className:"nameZone"},Y.a.get(t,"attributes.firstname",""),"\xa0",Y.a.get(t,"attributes.lastname","")),r.a.createElement("p",null,r.a.createElement("span",{className:"emailField"},r.a.createElement("b",null,"Email: "),t.email," (",t.strategy,")"))),r.a.createElement("div",{className:"dates"},r.a.createElement("span",{className:"field"},r.a.createElement("b",null,"Created: "),qe()(t.attributes.created_at||t.attributes.createdOn).fromNow()),r.a.createElement("span",{className:"field"},r.a.createElement("b",null,"Last Login: "),t.attributes.last_logon?qe()(t.attributes.last_logon).fromNow():"never"))),r.a.createElement("div",null,t.email.toLowerCase()!==n&&r.a.createElement(wn,{user:t,onUserUpdated:s,onPasswordReset:o})))},On=function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=e.users,l=e.role,u=Y.a.some(i,function(e){return e.attributes&&e.attributes.picture_url});return r.a.createElement("div",{key:"role-"+l.id},r.a.createElement("div",{onClick:function(){return o(!s)},id:"div-role-".concat(l.id),className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement(c.C,{minimal:!0},i.length),r.a.createElement("span",{className:"title"},l.name)),s?r.a.createElement(c.l,{icon:"caret-up"}):r.a.createElement(c.l,{icon:"caret-down"})),r.a.createElement(c.f,{isOpen:s},r.a.createElement("div",{className:"bp_table"},i.map(function(t){return r.a.createElement(yn,{key:t.email,user:t,showPicture:u,currentUserEmail:e.currentUserEmail,onUserUpdated:e.onUserUpdated,onPasswordReset:e.onPasswordReset})}))))},kn=["email","attributes.firstname","attributes.lastname"],Cn=Object(i.b)(function(e){return{profile:e.user.profile,roles:e.roles.roles,users:e.user.users,loading:e.user.loadingUsers}},{})(function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1];if(!e.users||e.loading||!e.roles)return r.a.createElement(kt,null);if(!e.users.length)return r.a.createElement(c.d,{title:"This workspace has no collaborators, yet",style:{textAlign:"center"}});var i=Y.a.get(e.profile,"email","").toLowerCase(),l=Ma(e.users,kn,s),u=[].concat(Object(Ie.a)(e.roles),[vn.CHAT_USER_ROLE]);return r.a.createElement("div",null,r.a.createElement(c.m,{id:"input-filter",placeholder:"Filter users",value:s,onChange:function(e){return o(e.target.value.toLowerCase())},autoComplete:"off",className:"filterField"}),r.a.createElement("div",{className:"bp_users-container"},s&&!l.length&&r.a.createElement(c.d,{title:"No user matches your query",className:"filterCallout"}),u.map(function(t){var a=l.filter(function(e){return e.role===t.id});return a.length?r.a.createElement(On,{key:t.id,users:a,role:t,currentUserEmail:i,onUserUpdated:e.onUserUpdated,onPasswordReset:e.onPasswordReset}):null})))}),xn=Object(i.b)(function(e){return{loading:e.user.loadingUsers,roles:e.roles.roles,authConfig:e.user.authConfig}},{fetchUsers:We,fetchRoles:ze,fetchAuthConfig:Xe})(function(e){Object(n.useEffect)(function(){!e.roles.length&&e.fetchRoles(),!e.authConfig&&e.fetchAuthConfig()},[]),Object(n.useEffect)(function(){e.roles&&k()},[e.roles]);var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),p=Object(vt.a)(m,2),f=p[0],h=p[1],g=Object(n.useState)(),A=Object(vt.a)(g,2),b=A[0],E=A[1],v=Object(n.useState)(),w=Object(vt.a)(v,2),y=w[0],O=w[1],k=function(){var t=e.roles.map(function(e){return e.id}).join(",");e.fetchUsers(t)};return r.a.createElement(ct,{title:"Collaborators",helpText:"Create, delete users or update their role."},r.a.createElement(Et,{sideMenu:r.a.createElement("div",null,r.a.createElement(c.b,{id:"btn-create",style:{width:160},text:"Add collaborator",icon:"add",onClick:function(){return o(!0)}}),r.a.createElement(bn,{isOpen:s,toggleOpen:function(){return o(!s)},onUserCreated:function(e){O("newAccount"),o(!1),d(!0),h(e.email),E(e.tempPassword),k()},onUserAdded:function(){o(!1),k()}}),r.a.createElement(En,{isOpen:u,toggle:function(){return d(!u)},messageId:y,email:f,password:b}))},r.a.createElement(Cn,{onPasswordReset:function(e,t){O("passwordReset"),h(e),E(t),d(!0)},onUserUpdated:k})))}),Rn=function(e){var t=Object(n.useState)("none"),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(vt.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)(function(){g()},[e.workspace,e.isOpen]);var g=function(){if(e.workspace&&e.workspace.pipeline){var t=e.workspace.pipeline,a=!1;Object.keys(vn.defaultPipelines).forEach(function(e){Y.a.isEqual(t,vn.defaultPipelines[e])&&(o(e),d(void 0),a=!0)}),a||(o("custom"),d(t.map(function(e){return e.id})))}},A=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/workspaces/".concat(e.workspace.id,"/pipeline"),{pipelineId:s,resetStage:f});case 3:$("Pipeline updated successfully"),e.toggle(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ee(t.t0.message);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(c.h,{isOpen:e.isOpen,icon:"git-branch",onClose:e.toggle,transitionDuration:0,title:"Configure Pipeline"},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.x,{label:"Which pipeline would you like to use?",onChange:function(e){return o(e.currentTarget.value)},selectedValue:s},r.a.createElement(c.w,{id:"radio-no-pipeline",label:"No pipeline [production]",value:"none"}),r.a.createElement(c.w,{id:"radio-bp-pipeline",label:"Botpress default [dev, staging, production]",value:"botpress"}),u&&r.a.createElement(c.w,{id:"radio-bp-custom",label:"Custom  [".concat(u.join(", "),"]"),value:"custom"})),r.a.createElement("br",null),r.a.createElement(c.e,{checked:f,onChange:function(e){return h(e.currentTarget.checked)},label:"Move all bots to the first stage of the pipeline"})),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",text:"Submit",onClick:A}))))},In=function(e){return e.toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9_-]/g,"")},Sn=function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(!0),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(1),p=Object(vt.a)(m,2),f=p[0],h=p[1],g=Object(n.useState)(),A=Object(vt.a)(g,2),b=A[0],E=A[1],v=Object(n.useState)(),w=Object(vt.a)(v,2),y=w[0],O=w[1],x=Object(n.useState)(),R=Object(vt.a)(x,2),I=R[0],S=R[1],N=Object(n.useState)("internal"),T=Object(vt.a)(N,2),j=T[0],D=T[1],B=Object(n.useState)("none"),P=Object(vt.a)(B,2),L=P[0],F=P[1],M=function(){var t=Object(C.a)(k.a.mark(function t(){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:b,name:y,audience:j,description:I,pipelineId:L},t.prev=1,t.next=4,Oe.getSecured().post("/admin/workspaces",a);case 4:e.refreshWorkspaces(),$("Workspace created successfully"),U(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),ee(t.t0.message);case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(){return t.apply(this,arguments)}}(),U=function(){E(""),O(""),S(""),D("external"),F("none"),o(!1),d(!0)};return r.a.createElement("div",null,r.a.createElement(c.h,{isOpen:s,icon:"add",onClose:U,transitionDuration:0,title:"Create workspace"},r.a.createElement("div",{className:lt.a.DIALOG_BODY},1===f&&r.a.createElement(n.Fragment,null,r.a.createElement(c.j,{label:r.a.createElement("span",null,"Workspace Name"),labelFor:"input-workspaceName",labelInfo:"*"},r.a.createElement(c.m,{id:"input-workspaceName",placeholder:"The name of your workspace",value:y,onChange:function(e){O(e.target.value),u&&E(In(e.target.value))},tabIndex:2,autoFocus:!0})),r.a.createElement(c.j,{label:r.a.createElement("span",null,"Workspace ID"),labelFor:"input-workspaceId",labelInfo:"*",helperText:"This ID cannot be changed afterwards."},r.a.createElement(c.m,{id:"input-workspaceId",placeholder:"The ID of your workspace",value:b,onChange:function(e){d(!1),E(In(e.target.value))},tabIndex:1})),r.a.createElement(c.j,{label:r.a.createElement("span",null,"Description"),labelFor:"input-description"},r.a.createElement(c.D,{id:"input-description",placeholder:"What is this workspace being used for? (optional)",value:I,onChange:function(e){return S(e.currentTarget.value)},fill:!0,rows:3,tabIndex:3,maxLength:500}))),2===f&&r.a.createElement(n.Fragment,null,r.a.createElement(c.x,{label:"Who will interact with bots of this workspace? ",onChange:function(e){return D(e.currentTarget.value)},selectedValue:j},r.a.createElement(c.w,{id:"radio-insert",label:"External users",value:"external"}),r.a.createElement(c.w,{id:"radio-internal",label:"Internal users",value:"internal"}))),3===f&&r.a.createElement(n.Fragment,null,r.a.createElement(c.x,{label:"Which pipeline would you like to use for this workspace?",onChange:function(e){return F(e.currentTarget.value)},selectedValue:L},r.a.createElement(c.w,{id:"radio-no-pipeline",label:"No pipeline [production]",value:"none"}),r.a.createElement(c.w,{id:"radio-bp-pipeline",label:"Botpress default [dev, staging, production]",value:"botpress"})))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},f>1&&r.a.createElement(c.b,{id:"btn-next",text:"Previous",onClick:function(){return h(f-1)}}),f<3&&r.a.createElement(c.b,{id:"btn-next",text:"Next",onClick:function(){return h(f+1)}}),3===f&&r.a.createElement(c.b,{id:"btn-submit",text:"Submit",onClick:M})))),r.a.createElement(c.b,{id:"btn-create",text:"Create workspace",icon:"add",onClick:function(){return o(!0)}}))},Nn=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/workspaces/".concat(e.workspace.id,"/delete"));case 3:e.refreshWorkspaces(),$("Workspace deleted successfully"),l(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),ee(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),l=function(){o(""),e.toggle()};if(!e.workspace)return null;var u="".concat(e.workspace.bots.length," bot").concat(1===e.workspace.bots.length?"":"s"," will also be deleted");return r.a.createElement(c.h,{isOpen:e.isOpen,icon:"trash",onClose:l,transitionDuration:0,title:'Delete workspace "'.concat(e.workspace.name,'"')},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.d,{intent:_.a.WARNING,title:u},"Deleting a workspace is definitive. All associated bots will also be deleted."),r.a.createElement("br",null),r.a.createElement(c.j,{label:r.a.createElement("span",null,"Workspace name"),labelFor:"input-workspaceName",labelInfo:"*"},r.a.createElement(c.m,{id:"input-workspaceName",placeholder:"Type the name of the workspace (case-sensitive)",value:s,onChange:function(e){return o(e.currentTarget.value)},tabIndex:1,autoFocus:!0}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",intent:_.a.DANGER,text:"Delete",tabIndex:2,onClick:i,disabled:e.workspace.name!==s}))))},Tn=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)(function(){if(e.workspace){var t=e.workspace,a=t.name,n=t.description;o(a),d(n)}},[e.workspace,e.isOpen]);var m=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/workspaces/".concat(e.workspace.id),{name:s,description:u});case 3:e.refreshWorkspaces(),$("Workspace saved successfully"),p(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),ee(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),p=function(){o(""),d(""),e.toggle()};return r.a.createElement(c.h,{isOpen:e.isOpen,icon:"edit",onClose:p,transitionDuration:0,title:"Edit Workspace"},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:r.a.createElement("span",null,"Workspace Name"),labelFor:"input-name",labelInfo:"*"},r.a.createElement(c.m,{id:"input-name",placeholder:"The name of your workspace",value:s,onChange:function(e){return o(e.currentTarget.value)},tabIndex:1,autoFocus:!0})),r.a.createElement(c.j,{label:r.a.createElement("span",null,"Description"),labelFor:"input-description"},r.a.createElement(c.D,{id:"input-description",placeholder:"What is this workspace being used for? (optional)",value:u,onChange:function(e){return d(e.currentTarget.value)},rows:3,fill:!0,tabIndex:2,maxLength:500}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",text:"Save",tabIndex:3,onClick:m}))))},jn=function(e){var t=Object(n.useState)("current"),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(-1),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/workspaces/".concat(e.workspaceId,"/resetInvite"),{inviteLimit:u});case 3:$("Invite code updated successfully"),e.onUpdate(),o("current"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),ee(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(c.B,{id:"tabs",onChange:function(e){return o(e)},selectedTabId:s},r.a.createElement(c.A,{id:"current",title:"Current invite code",panel:r.a.createElement("div",null,"Current Code: ",r.a.createElement("strong",null,e.inviteCode),r.a.createElement("br",null)," ",r.a.createElement("br",null),"Nb. of usage left: ",-1===e.allowedUsages?"unlimited":e.allowedUsages)}),r.a.createElement(c.A,{id:"advanced",title:"Change invite code",panel:r.a.createElement("div",null,r.a.createElement("p",null,"Invite codes are generated automatically. Choose how many time the code can be used (-1 = unlimited). Once changed, the old code can't be used anymore."),r.a.createElement(c.g,null,r.a.createElement(c.r,{id:"input-allowed",placeholder:"Max number of time it can be used",value:u,onValueChange:function(e){return d(e)}}),r.a.createElement(c.b,{text:"Generate new code",onClick:m})))}))},Dn={label:"Anonymous",desc:"Anonymous users can talk to the bots (default)"},Bn={label:"Authenticated",desc:"Authenticated users will be added to the workspace automatically, then can talk to bots"},Pn={label:"Authorized",desc:"Authenticated users with an existing access to the workspace can talk to bots"},Ln={label:"Anonymous + Code",desc:"Anonymous users with an invite code can talk to bots",inviteRequired:!0},Fn={label:"Auth + Code",desc:"Authenticated users with an invite code will be added to the workspace, then can talk to bots",inviteRequired:!0},Mn=function(e){var t=Object(n.useState)("anonymous"),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(-1),p=Object(vt.a)(m,2),f=p[0],h=p[1];Object(n.useEffect)(function(){e.workspaceId&&g()},[e.workspaceId,e.isOpen]);var g=function(){var t=Object(C.a)(k.a.mark(function t(){var a,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getSecured().get("/admin/workspaces/".concat(e.workspaceId,"/rollout"));case 2:a=t.sent,n=a.data,d(n.inviteCode),h(n.allowedUsages),o(n.rolloutStrategy);case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(C.a)(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.getSecured().post("/admin/workspaces/".concat(e.workspaceId,"/rollout/").concat(s));case 3:$("Rollout strategy updated successfully"),e.refreshWorkspaces&&e.refreshWorkspaces(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ee(t.t0.message);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),b=["anonymous-invite","authenticated-invite"].includes(s);return r.a.createElement(rn,{title:"Rollout Strategy",icon:"send-to-graph",isOpen:e.isOpen,onClose:function(){return e.toggle()},size:"md"},r.a.createElement(sn,null,r.a.createElement("p",null,"The rollout strategy is applied to all bots of the workspace when a user encounters an Auth Gate on the flow. Without an Auth Gate, the policy has no effect."),r.a.createElement(c.x,{onChange:function(e){return o(e.currentTarget.value)},selectedValue:s},r.a.createElement(c.w,{id:"radio-anonymous",value:"anonymous",label:Dn.desc}),r.a.createElement(c.w,{id:"radio-authenticated",value:"authenticated",label:Bn.desc}),r.a.createElement(c.w,{id:"radio-authorized",value:"authorized",label:Pn.desc}),r.a.createElement("p",null,r.a.createElement("strong",null,"Strategies requiring an invite code")),r.a.createElement(c.w,{id:"radio-anonymous-invite",value:"anonymous-invite",label:Ln.desc}),r.a.createElement(c.w,{id:"radio-authenticated-invite",value:"authenticated-invite",label:Fn.desc})),r.a.createElement("br",null),b&&r.a.createElement(jn,{inviteCode:u,allowedUsages:f,onUpdate:g,workspaceId:e.workspaceId})),r.a.createElement(on,null,r.a.createElement(c.b,{id:"btn-submit",text:"Submit",onClick:A})))},Un=Object(i.b)(function(e){return{workspaces:e.server.workspaces}},{fetchWorkspaces:function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/workspaces");case 2:a=e.sent,n=a.data,t({type:"server/FETCH_WORKSPACES_RECEIVED",workspaces:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},fetchMyWorkspaces:Ke})(function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(vt.a)(m,2),f=p[0],h=p[1],g=Object(n.useState)(!1),A=Object(vt.a)(g,2),b=A[0],E=A[1],v=Object(n.useState)(!1),w=Object(vt.a)(v,2),y=w[0],O=w[1];Object(n.useEffect)(function(){e.fetchWorkspaces()},[]);var k=function(){e.fetchMyWorkspaces(),e.fetchWorkspaces()};return e.workspaces?r.a.createElement(ct,{title:"Manage Workspaces"},r.a.createElement(Et,{sideMenu:r.a.createElement(Sn,{refreshWorkspaces:k})},r.a.createElement("div",{className:"bp_table"},e.workspaces.map(function(e){return r.a.createElement("div",{className:"bp_table-row",key:e.id},r.a.createElement("div",{className:"actions"},r.a.createElement(c.s,{minimal:!0,position:J.a.BOTTOM,interactionKind:c.t.HOVER},r.a.createElement(c.b,{id:"btn-menu",icon:r.a.createElement(c.l,{icon:"menu"}),minimal:!0}),r.a.createElement(c.n,null,r.a.createElement(c.p,{id:"btn-edit",icon:"edit",text:"Edit Workspace",onClick:function(){return function(e){o(e),h(!0)}(e)}}),r.a.createElement(c.p,{id:"btn-rollout",icon:"send-to-graph",text:"Configure Rollout",onClick:function(){return function(e){o(e),E(!0)}(e)}}),r.a.createElement(c.p,{id:"btn-pipeline",icon:"git-branch",text:"Configure Pipeline",onClick:function(){return function(e){o(e),d(!0)}(e)}}),r.a.createElement(c.o,null),r.a.createElement(c.p,{id:"btn-delete",icon:"trash",text:"Delete Workspace",onClick:function(){return function(e){o(e),O(!0)}(e)}})))),r.a.createElement("div",{className:"spaced"},r.a.createElement("div",null,r.a.createElement("a",{className:"link",onClick:function(){return t=e.id,le.push("/workspace/".concat(t,"/bots"));var t}},r.a.createElement("strong",null,e.name))," ",r.a.createElement("span",null,"(",e.id,")")),r.a.createElement("div",{style:{width:200}},r.a.createElement("small",null,e.bots.length," bot",1===e.bots.length?"":"s"," - ",e.audience," users"))),r.a.createElement("p",null,e.description))}))),r.a.createElement(Tn,{workspace:s,isOpen:f,toggle:function(){return h(!f)},refreshWorkspaces:k}),r.a.createElement(Rn,{workspace:s,isOpen:u,toggle:function(){return d(!u)},refreshWorkspaces:k}),r.a.createElement(Nn,{workspace:s,isOpen:y,toggle:function(){return O(!y)},refreshWorkspaces:k}),r.a.createElement(Mn,{workspaceId:s&&s.id,isOpen:b,toggle:function(){return E(!b)},refreshWorkspaces:k})):null}),Hn=a(1222),Vn=a(1220),qn=cn.a.ofType(),Qn=function(e,t,a){var n=t.workspaceName.toLowerCase(),r=e.toLowerCase();return"".concat(n," ").concat(t.workspace).indexOf(r)>=0},Zn=function(e,t){var a=t.handleClick,n=t.modifiers;t.query;return n.matchesPredicate?r.a.createElement(c.p,{className:lt.a.SMALL,active:n.active,disabled:n.disabled,key:e.workspaceName,onClick:a,text:e.workspaceName}):null},zn={fetchMyWorkspaces:Ke,switchWorkspace:function(e){return function(){var t=Object(C.a)(k.a.mark(function t(a){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return he(e),t.next=3,a(Ge());case 3:return t.next=5,a(Te());case 5:a({type:"user/CURRENT_WORKSPACE_CHANGED",currentWorkspace:e});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},fetchUsers:We,fetchBots:xe,fetchRoles:ze},Yn=Object(Vn.a)(Object(i.b)(function(e){return{workspaces:e.user.workspaces,currentWorkspace:e.user.currentWorkspace}},zn)(function(e){var t=e.location.pathname.split("/"),a=Object(vt.a)(t,4),s=a[1],o=a[2],i=a[3],l=Object(n.useState)(),u=Object(vt.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(),f=Object(vt.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)(function(){e.workspaces?(b(),A()):e.fetchMyWorkspaces()},[e.workspaces,e.currentWorkspace]),Object(n.useEffect)(function(){e.currentWorkspace&&(rt({operation:"read",resource:"admin.collaborators"})&&e.fetchUsers(),rt({operation:"read",resource:"admin.roles"})&&e.fetchRoles(),e.fetchBots())},[e.currentWorkspace]);var A=function(){var t=e.workspaces;m(t),g(t.find(function(e){return e.workspace===ge()}))},b=function(){var t=function(){if(e.workspaces&&e.workspaces.length){var t=e.workspaces.find(function(e){return e.workspace==o}),a=e.workspaces.find(function(e){return e.workspace==ge()});return t&&t.workspace||a&&a.workspace||e.workspaces[0].workspace}}();if(!t)return e.history.replace("/noAccess");t===ge()&&t===o||E(t)},E=function(t){e.switchWorkspace(t),"workspace"===s&&e.history.push("/workspace/".concat(t,"/").concat(i))};return e.workspaces&&d&&h?1===e.workspaces.length?r.a.createElement(c.b,{minimal:!0,disabled:!0,text:"Workspace: ".concat(e.workspaces[0].workspaceName),className:"workspaceButton"}):r.a.createElement(qn,{items:d,itemPredicate:Qn,itemRenderer:Zn,activeItem:h,popoverProps:{minimal:!0},noResults:r.a.createElement(c.p,{disabled:!0,text:"No results."}),onItemSelect:function(e){return E(e.workspace)}},r.a.createElement(c.b,{minimal:!0,text:"Workspace: ".concat(h.workspaceName),rightIcon:"caret-down",className:"workspaceButton"})):null})),Wn=a(556),Gn=a.n(Wn),Kn=a(342),Xn=a(1221),Jn={fetchCurrentVersion:Je,fetchLatestVersions:_e},_n=Object(Vn.a)(Object(i.b)(function(e){return{licensing:e.license.licensing,version:e.version}},Jn)(function(e){Object(n.useEffect)(function(){e.version.currentVersion||e.fetchCurrentVersion(),e.version.latestReleases.length||e.fetchLatestVersions()},[]);var t=function(t){var a=t.text,n=t.icon,s=t.url,o=t.id,i=t.isPro,l=t.operation,u=t.resource,d=t.superAdmin,m=t.tag,p=Object(Xn.a)(e.location.pathname,{path:s}),f=ge();return!e.licensing||i&&!e.licensing.isPro?null:r.a.createElement(ot,{resource:u,operation:l,superAdmin:d,key:a},r.a.createElement("div",{id:o,className:Le()("bp-sa-menu-item",Object(y.a)({},"bp-sa-menu-item-active",p)),onClick:function(){return e.history.push(Object(Kn.a)(s,{workspaceId:f||void 0}))}},r.a.createElement(c.l,{icon:n}),r.a.createElement("span",{className:"label"},a),m&&r.a.createElement("span",{style:{float:"right"}},m)))};return r.a.createElement("div",{className:"bp-sa-menu"},r.a.createElement("div",{className:"bp-sa-menu-header"}," Workspace"),r.a.createElement(c.g,{vertical:!0,fill:!0},r.a.createElement(t,{id:"btn-menu-bots",text:"Bots",icon:r.a.createElement(j.a,{color:Be.a.GRAY1}),url:"/workspace/:workspaceId?/bots",resource:"user.bots.*",operation:"read"}),r.a.createElement(t,{id:"btn-menu-users",text:"Collaborators",icon:"user",url:"/workspace/:workspaceId?/users",resource:"admin.collaborators.*",operation:"read",isPro:!0}),r.a.createElement(t,{id:"btn-menu-roles",text:"Roles",icon:"shield",url:"/workspace/:workspaceId?/roles",resource:"admin.roles.*",operation:"read",isPro:!0})),r.a.createElement(ot,{superAdmin:!0},r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"bp-sa-menu-header"},"Management"),r.a.createElement(c.g,{vertical:!0,fill:!0},r.a.createElement(t,{id:"btn-menu-version",text:"Source Control",icon:"changes",url:"/server/version"}),r.a.createElement(t,{id:"btn-menu-license",text:"Server License",icon:r.a.createElement(j.b,{color:Be.a.GRAY1}),url:"/server/license"}),r.a.createElement(t,{text:"Languages",id:"btn-menu-language",icon:"globe-network",url:"/server/languages"}),r.a.createElement(t,{text:"Production Checklist",id:"btn-menu-checklist",icon:"endorsed",url:"/checklist"})),r.a.createElement("div",{className:"bp-sa-menu-header"},"Health"),r.a.createElement(c.g,{vertical:!0,fill:!0},r.a.createElement(t,{id:"btn-menu-monitoring",text:"Monitoring",icon:"timeline-line-chart",url:"/server/monitoring"}),r.a.createElement(t,{id:"btn-menu-alerting",text:"Alerting",icon:"notifications",url:"/server/alerting"}),r.a.createElement(t,{text:"Debug",id:"btn-menu-debug",icon:"console",url:"/server/debug"})))),r.a.createElement("div",{className:"bp-sa-menu-header"},"Announcements"),r.a.createElement(c.g,{vertical:!0,fill:!0},r.a.createElement(t,{text:"Latest Releases",id:"btn-menu-releases",icon:"feed",url:"/latestReleases",tag:function(){var t=e.version.currentVersion;if(Y.a.get(e,"version.latestReleases.0.version",t)>t)return r.a.createElement(c.C,{minimal:!0,intent:_.a.SUCCESS},"new")}()})))})),$n=function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(""),p=Object(vt.a)(m,2),f=p[0],h=p[1],g=function(){var t=Object(C.a)(k.a.mark(function t(a){var n,r,o,c;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.profile,r=n.strategyType,o=n.strategy,c=n.email,t.prev=2,t.next=5,Oe.getSecured().post("/auth/login/".concat(r,"/").concat(o),{email:c,password:s,newPassword:u});case 5:e.toggle(),$("Password updated successfully"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),ee("Error while updating password: ".concat(t.t0.message));case 12:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(c.h,{title:"Change your password",icon:"key",isOpen:e.isOpen,onClose:e.toggle,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("form",{onSubmit:g},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:"Current password"},r.a.createElement(c.m,{id:"input-password",type:"password",value:s,onChange:function(e){return o(e.target.value)},tabIndex:1,autoFocus:!0})),r.a.createElement(c.j,{label:"New password"},r.a.createElement(c.m,{id:"input-newPassword",type:"password",value:u,onChange:function(e){return d(e.target.value)},tabIndex:2})),r.a.createElement(c.j,{label:"Confirm password"},r.a.createElement(c.m,{id:"input-confirmPassword",type:"password",value:f,onChange:function(e){return h(e.target.value)},tabIndex:3}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",type:"submit",text:"Save",tabIndex:4,intent:_.a.PRIMARY,disabled:!s||!u||u!==f})))))},er=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(),l=Object(vt.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)(function(){o(e.profile.firstname),d(e.profile.lastname)},[e.isOpen]);var m=function(){var t=Object(C.a)(k.a.mark(function t(a){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,Oe.getSecured().post("/auth/me/profile",{firstname:s,lastname:u});case 4:e.fetchProfile(),e.toggle(),$("Profile updated successfully"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),ee("Error while updating profile: ".concat(t.t0.message));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(c.h,{title:"Update your profile",icon:"user",isOpen:e.isOpen,onClose:e.toggle,transitionDuration:0,canOutsideClickClose:!1},r.a.createElement("form",{onSubmit:m},r.a.createElement("div",{className:lt.a.DIALOG_BODY},r.a.createElement(c.j,{label:"First Name"},r.a.createElement(c.m,{id:"input-firstname",value:s,onChange:function(e){return o(e.target.value)},tabIndex:1,autoFocus:!0})),r.a.createElement(c.j,{label:"Last Name"},r.a.createElement(c.m,{id:"input-lastname",value:u,onChange:function(e){return d(e.target.value)},tabIndex:2}))),r.a.createElement("div",{className:lt.a.DIALOG_FOOTER},r.a.createElement("div",{className:lt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(c.b,{id:"btn-submit",type:"submit",text:"Save",tabIndex:3,intent:_.a.PRIMARY})))))},tr=Object(i.b)(function(e){return{profile:e.user.profile}},{fetchProfile:Ge})(function(e){var t=Object(n.useState)(!1),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(vt.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)(function(){!e.profile&&e.fetchProfile()},[]);if(!e.profile)return null;var m=function(){return o(!s)},p=function(){return d(!u)},f=e.profile,h=f.email,g=f.fullName,A=f.strategyType,b=f.picture_url,E="basic"===A,v=b?r.a.createElement("img",{src:b,className:"dropdown-picture"}):r.a.createElement(c.l,{icon:"user",color:Be.a.WHITE});return r.a.createElement("div",null,r.a.createElement(c.s,{minimal:!0,position:J.a.BOTTOM,interactionKind:c.t.CLICK},r.a.createElement(c.b,{id:"btn-menu",icon:v,rightIcon:r.a.createElement(c.l,{icon:"caret-down",color:Be.a.WHITE}),minimal:!0}),r.a.createElement(c.n,null,r.a.createElement(c.o,{title:"Signed in as ".concat(g||h)}),r.a.createElement(c.p,{id:"btn-profile",icon:"user",text:"Update Profile",onClick:m}),E&&r.a.createElement(c.p,{id:"btn-changepass",icon:"key",text:"Change Password",onClick:p}),r.a.createElement(c.o,null),r.a.createElement(c.p,{id:"btn-logout",icon:"log-out",text:"Logout",onClick:function(){(new ve).logout()}}))),r.a.createElement($n,{profile:e.profile,isOpen:u,toggle:p}),r.a.createElement(er,{isOpen:s,toggle:m,profile:e.profile,fetchProfile:e.fetchProfile}))}),ar=function(){return r.a.createElement("header",{className:"bp-header"},r.a.createElement(c.q,null,r.a.createElement(c.q.Group,null,r.a.createElement(c.q.Heading,null,r.a.createElement("a",{href:"admin/"},r.a.createElement("img",{src:Gn.a,alt:"logo",className:"bp-header__logo"})))),r.a.createElement(c.q.Group,{align:Fa.a.RIGHT},r.a.createElement(Yn,null),r.a.createElement(c.q.Divider,null),r.a.createElement(tr,null))))},nr=function(e){return r.a.createElement("footer",{className:"statusBar"},r.a.createElement("div",{className:"statusBar-list"},r.a.createElement("div",{className:"statusBar-item"},r.a.createElement("strong",null,e.version))))},rr=function(){return r.a.createElement("div",{className:"bp-header__warning"},r.a.createElement(Hn.a,{href:"/admin/server/license"},r.a.createElement(c.l,{icon:"warning-sign"}),"Botpress is currently not licensed. Please update your license to re-enable all features."))},sr={fetchLicensing:Te,fetchProfile:Ge,fetchCurrentVersion:Je},or=Object(i.b)(function(e){return{profile:e.user.profile,licensing:e.license.licensing,version:e.version.currentVersion}},sr)(function(e){if(Object(n.useEffect)(function(){e.fetchLicensing(),e.fetchProfile(),e.version||e.fetchCurrentVersion()},[]),!e.profile)return null;var t=!e.licensing||!e.licensing.isPro||"licensed"===e.licensing.status;return r.a.createElement(n.Fragment,null,r.a.createElement(ar,null),r.a.createElement("div",{className:"bp-sa-wrapper"},r.a.createElement(_n,null),r.a.createElement("div",{className:"bp-sa-content-wrapper"},!t&&r.a.createElement(rr,null),e.children)),r.a.createElement(nr,{version:e.version}))}),cr=function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onChangePassword(s,u)}},e.email&&r.a.createElement(c.j,{label:"E-mail"},r.a.createElement(c.m,{tabIndex:-1,value:e.email,disabled:!0,type:"text",id:"email"})),r.a.createElement(c.j,{label:"New Password"},r.a.createElement(c.m,{tabIndex:1,value:s,onChange:function(e){return o(e.target.value)},type:"password",name:"newPassword",id:"newPassword",autoFocus:!0})),r.a.createElement(c.j,{label:"Confirm Password"},r.a.createElement(c.m,{tabIndex:2,value:u,onChange:function(e){return d(e.target.value)},type:"password",name:"confirmPassword",id:"confirmPassword"})),r.a.createElement(c.b,{tabIndex:3,type:"submit",text:"Change",id:"btn-change",disabled:!s||!u,intent:_.a.PRIMARY}))},ir=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],c=e.location.state,i=c.email,l=c.password,u=c.loginUrl,m=function(){var t=Object(C.a)(k.a.mark(function t(a,n){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a===n){t.next=2;break}return t.abrupt("return",o("Passwords don't match"));case 2:return t.prev=2,o(void 0),t.next=6,e.auth.login({email:i,password:l,newPassword:a},u);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),o(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a){return t.apply(this,arguments)}}(),p=""===l?"This is the first time you run Botpress. Please pick a password.":"Your password has expired or was temporary. Please set a new password.";return!e.auth.isAuthenticated()&&i&&u?r.a.createElement(v,{subtitle:p,error:s},r.a.createElement(cr,{onChangePassword:m,email:i})):r.a.createElement(d.a,{to:"/"})},lr=function(e){return e.strategies?r.a.createElement("div",null,e.strategies.map(function(t){var a=t.strategyType,n=t.strategyId,s=t.label,o="saml"===a||"oauth2"===a?"Sign in with SSO (".concat(n,")"):"Sign in with user/pass";return r.a.createElement(c.b,{key:n,id:"btn-".concat(n),text:s?"Sign in with ".concat(s):o,onClick:function(){return e.onStrategySelected(n)}})})):null},ur=function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onLogin(s,u)}},r.a.createElement(c.j,{label:"E-mail"},r.a.createElement(c.m,{tabIndex:1,value:s,onChange:function(e){return o(e.target.value)},type:"text",id:"email",autoFocus:!0})),r.a.createElement(c.j,{label:"Password"},r.a.createElement(c.m,{tabIndex:2,value:u,onChange:function(e){return d(e.target.value)},type:"password",id:"password"})),r.a.createElement(c.b,{tabIndex:3,type:"submit",id:"btn-signin",text:"Sign in",disabled:!s||!u,intent:_.a.PRIMARY}))},dr=function(e){var t=Object(n.useState)(!0),a=Object(vt.a)(t,2),s=a[0],o=a[1],c=Object(n.useState)(!1),i=Object(vt.a)(c,2),l=i[0],u=i[1],d=Object(n.useState)(),m=Object(vt.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(""),g=Object(vt.a)(h,2),A=g[0],b=g[1],E=Object(n.useState)(),w=Object(vt.a)(E,2),y=w[0],O=w[1],x=Object(n.useState)(),R=Object(vt.a)(x,2),I=R[0],S=R[1];Object(n.useEffect)(function(){T()},[e.match.params.strategy,s]),Object(n.useEffect)(function(){N()},[]);var N=function(){var t=Object(C.a)(k.a.mark(function t(){var a,n,r,s,o,c,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.match.params.workspace,n=e.location.query,r=n.workspaceId,s=n.botId,o=n.sessionId,c=n.signature,i=n.error,(a||r)&&he(a||r),s&&o&&c&&Ae({botId:s,sessionId:o,signature:c}),i&&S(i),!e.auth.isAuthenticated()){t.next=8;break}return t.next=8,e.auth.afterLoginRedirect();case 8:if(p){t.next=11;break}return t.next=11,j();case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),T=function(){B(e.match.params.strategy),p&&1===p.length&&(D(p[0].strategyId),B(p[0].strategyId)),e.location.state&&O(e.location.state.from)},j=function(){var e=Object(C.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getAnonymous().get("/auth/config");case 2:t=e.sent,a=t.data,f(a.payload.strategies),u(a.payload.isFirstUser),o(!1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(t){return e.history.push({pathname:"/login/".concat(t)})},B=function(t){var a=p&&p.find(function(e){return e.strategyId===t});if(!a)return b("");S(void 0);var n=a.strategyType,r=a.strategyId,s=a.registerUrl;if("saml"===n||"oauth2"===n)return window.location.href="".concat(Oe.getApiPath(),"/auth/redirect/").concat(n,"/").concat(r);l?e.history.push({pathname:"/register",state:{registerUrl:s}}):b(a.loginUrl)},P=function(){var t=Object(C.a)(k.a.mark(function t(a,n){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(void 0),t.next=4,e.auth.login({email:a,password:n},A,y);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),"PasswordExpiredError"===t.t0.type?e.history.push({pathname:"/changePassword",state:{email:a,password:n,loginUrl:A}}):S(Object(z.get)(t.t0,"response.data.message",t.t0.message));case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e,a){return t.apply(this,arguments)}}();return s||!p?null:r.a.createElement(v,{title:"Login",error:I,poweredBy:!0},A?r.a.createElement(ur,{onLogin:P}):r.a.createElement(lr,{strategies:p,onStrategySelected:D}))},mr=function(e){var t=Object(n.useState)(""),a=Object(vt.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(vt.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(""),p=Object(vt.a)(m,2),f=p[0],h=p[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onRegister(s,u,f)}},r.a.createElement(c.j,{label:"E-mail"},r.a.createElement(c.m,{tabIndex:1,value:s,onChange:function(e){return o(e.target.value)},type:"text",id:"email",autoFocus:!0})),r.a.createElement(c.j,{label:"Password"},r.a.createElement(c.m,{tabIndex:2,value:u,onChange:function(e){return d(e.target.value)},type:"password",id:"password"})),r.a.createElement(c.j,{label:"Confirm Password"},r.a.createElement(c.m,{tabIndex:3,type:"password",id:"confirmPassword",value:f,onChange:function(e){return h(e.target.value)}})),r.a.createElement(c.b,{tabIndex:4,type:"submit",id:"btn-register",text:"Create Account",disabled:!(s.length>4&&u.length>4&&f.length>4),intent:_.a.PRIMARY}))},pr=function(e){var t=Object(n.useState)(),a=Object(vt.a)(t,2),s=a[0],o=a[1],c=e.location.state.registerUrl,i=function(){var t=Object(C.a)(k.a.mark(function t(a,n,r){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n===r){t.next=2;break}return t.abrupt("return",o("Passwords don't match"));case 2:return t.prev=2,o(void 0),t.next=6,e.auth.register({email:a,password:n},c);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),o(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e,a,n){return t.apply(this,arguments)}}();return e.auth.isAuthenticated()||!c?r.a.createElement(d.a,{to:"/"}):r.a.createElement(v,{title:"Register",subtitle:"This is the first time you run Botpress. Please create the master admin account.",error:s},r.a.createElement(mr,{onRegister:i}))},fr=a(557),hr=a.n(fr),gr=(a(1198),a(95)),Ar=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:void 0,checked:[],expanded:["bp"],persist:!1},a.loadConfiguration=Object(C.a)(k.a.mark(function e(){var t,n,r,s,o,c,i,l,u;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/admin/server/debug");case 2:for(t=e.sent,n=t.data,r={label:"bp",children:[],expandDisabled:!0},s=!0,o=!1,c=void 0,e.prev=8,i=Object.keys(n).sort()[Symbol.iterator]();!(s=(l=i.next()).done);s=!0)u=l.value,a.buildNodeRecursive(r,u.split(":"),0);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),o=!0,c=e.t0;case 16:e.prev=16,e.prev=17,s||null==i.return||i.return();case 19:if(e.prev=19,!o){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:a.setState({nodes:r.children,checked:Object.keys(n).filter(function(e){return n[e]})});case 25:case"end":return e.stop()}},e,null,[[8,12,16,24],[17,,19,23]])})),a.saveConfiguration=Object(C.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.checked&&a.state.checked.join(","),e.next=3,Oe.getSecured().post("/admin/server/debug",{debugScope:t,persist:a.state.persist});case 3:$("Debug configuration updated successfully!");case 4:case"end":return e.stop()}},e)})),a.handlePersistChanged=function(e){return a.setState({persist:e.target.checked})},a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadConfiguration();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"buildNodeRecursive",value:function(e,t,a){if(a<t.length){var n=t[a],r=e.children.find(function(e){return e.label===n});r||(r={label:n,value:t.slice(0,a+1).join(":"),children:[]},e.children.push(r)),this.buildNodeRecursive(r,t,a+1)}}},{key:"renderTree",value:function(){var e=this;return this.state.nodes?r.a.createElement(hr.a,{nodes:this.state.nodes||[],checked:this.state.checked,expanded:this.state.expanded,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:["bp"].concat(Object(Ie.a)(t))})},showExpandAll:!0,icons:{check:r.a.createElement(gr.a,null),uncheck:r.a.createElement(gr.i,null),halfCheck:r.a.createElement(gr.a,{fillOpacity:"0.5"}),expandClose:r.a.createElement(gr.c,null),expandOpen:r.a.createElement(gr.b,null),expandAll:r.a.createElement(gr.h,null),collapseAll:r.a.createElement(gr.g,null),parentClose:r.a.createElement(gr.e,{stroke:"blue",fill:"none"}),parentOpen:r.a.createElement(gr.f,{stroke:"blue",fill:"none"}),leaf:r.a.createElement(gr.d,{stroke:"blue",fill:"none"})}}):null}},{key:"renderSide",value:function(){return r.a.createElement("div",null,r.a.createElement(c.b,{id:"btn-refresh",onClick:this.loadConfiguration,fill:!0,icon:"refresh",text:"Refresh"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.F,{content:"When checked, the selected debug options will be enabled after each server restart"},r.a.createElement(c.e,{id:"chk-persist",checked:this.state.persist,onChange:this.handlePersistChanged,label:"Persist"})),r.a.createElement(c.b,{id:"btn-save",onClick:this.saveConfiguration,intent:_.a.PRIMARY,fill:!0,icon:"floppy-disk",text:"Save"}))}},{key:"render",value:function(){return r.a.createElement(ct,{title:"Configure Debug",helpText:"This page allows you to enable or disable some debug scopes while using Botpress. This list is populated while features are being used, so some items may be missing",superAdmin:!0},r.a.createElement(Et,{sideMenu:this.renderSide()},this.renderTree()))}}]),t}(r.a.Component),br=a(1223),Er=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(S.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={},a.reloadModule=function(){var e=Object(C.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.getSecured().get("/modules/reload/".concat(t));case 3:a.setState({successMsg:"Module reloaded successfully"}),window.setTimeout(function(){a.setState({successMsg:void 0})},2e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(T.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchModules()}},{key:"render",value:function(){var e=this;return r.a.createElement(br.a,{style:{marginTop:50,padding:20}},this.state.successMsg&&r.a.createElement(A.a,{type:"success"},this.state.successMsg),r.a.createElement("h3",null,"Module Reloading"),r.a.createElement("div",{className:"bp_table "},this.props.modules.map(function(t){return r.a.createElement("div",{className:"bp_table-row"},r.a.createElement("div",{className:"actions"},r.a.createElement(na.a,{color:"primary",size:"sm",onClick:function(){return e.reloadModule(t.name)}},"Reload")),r.a.createElement("div",{className:"title"},t.name))})))}}]),t}(r.a.Component),vr=Object(i.b)(function(e){return Object(x.a)({},e.modules)},{fetchModules:function(){return function(){var e=Object(C.a)(k.a.mark(function e(t){var a,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getSecured().get("/modules");case 2:a=e.sent,n=a.data,t({type:"bots/FETCH_MODULES_RECEIVED",modules:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(Er),wr=a(559),yr=function(e){var t=e.component,a=e.auth,n=e.children,s=Object(wr.a)(e,["component","auth","children"]);return r.a.createElement(u.a,Object.assign({},s,{render:function(e){return a.isAuthenticated()?r.a.createElement(t,Object.assign({},e,{auth:a}),n):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Or=function(){var e=new ve;return r.a.createElement(i.a,{store:nt},r.a.createElement(m.a,{history:le},r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/login/:strategy?/:workspace?",render:function(t){return r.a.createElement(dr,Object.assign({auth:e},t))}}),r.a.createElement(u.a,{path:"/register/:strategy?/:workspace?",render:function(t){return r.a.createElement(pr,Object.assign({auth:e},t))}}),r.a.createElement(u.a,{path:"/setToken",component:function(){var t;return e.setSession({expiresIn:7200,idToken:(t="userToken",("; "+document.cookie).split("; ".concat(t,"=")).pop().split(";").shift())}),e.afterLoginRedirect(),null}}),r.a.createElement(u.a,{path:"/changePassword",render:function(t){return r.a.createElement(ir,Object.assign({auth:e},t))}}),r.a.createElement(u.a,{path:"/noAccess",component:function(){return r.a.createElement(v,{subtitle:r.a.createElement("strong",null,"No access")},r.a.createElement("p",null,"Sorry, you do not have access to any workspace."),r.a.createElement(c.b,{text:"Logout",onClick:e.logout}))}}),r.a.createElement(u.a,{path:"/chatAuthResult",component:w}),r.a.createElement(yr,{path:"/",auth:e,component:or},r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/checklist",component:Lt}),r.a.createElement(u.a,{path:"/latestReleases",component:aa}),r.a.createElement(u.a,{path:"/server/monitoring",component:Ra}),r.a.createElement(u.a,{path:"/server/version",component:La}),r.a.createElement(u.a,{path:"/server/languages",component:Yt}),r.a.createElement(u.a,{path:"/server/debug",component:Ar}),r.a.createElement(u.a,{path:"/server/license",component:fa}),r.a.createElement(u.a,{path:"/server/alerting",component:Nt}),r.a.createElement(u.a,{path:"/workspace/:workspaceId?/bots/:botId",component:gt}),r.a.createElement(u.a,{path:"/workspace/:workspaceId?/bots",component:_a}),r.a.createElement(u.a,{path:"/workspace/:workspaceId?/users",component:xn}),r.a.createElement(u.a,{path:"/workspace/:workspaceId?/roles",component:tn}),r.a.createElement(u.a,{path:"/workspaces",component:Un}),r.a.createElement(u.a,{path:"/debug",component:Ar}),r.a.createElement(u.a,{path:"/modules",component:vr}),r.a.createElement(u.a,{path:"/",render:function(){return r.a.createElement(d.a,{from:"/",to:"/workspace/".concat(ge(),"/bots")})}}))))))}();o.a.render(r.a.createElement("div",null,Or),document.getElementById("root"))},161:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUserRole="dev",t.defaultAdminRole="admin",t.defaultRoles=[{id:"admin",name:"Administrator",description:"Administrators have full access to the workspace including adding members, creating bots and synchronizing changes.",rules:[{res:"*",op:"+r+w"},{res:"module.code-editor.global.configs",op:"-r-w"}]},{id:"dev",name:"Developer",description:"Developers have full read/write access to bots, including flows, content, NLU and actions",rules:[{res:"*",op:"+r+w"},{res:"admin.*",op:"+r-w"},{res:"admin.collaborators.*",op:"-r"},{res:"module.code-editor.global.*",op:"+r-w"},{res:"module.code-editor.global.configs",op:"-r-w"}]},{id:"editor",name:"Content Editor",description:"Content Editors have read/write access to content and NLU, and read-only access to flows and actions.",rules:[{res:"*",op:"+r"},{res:"admin.collaborators.*",op:"-r"},{res:"bot.flows",op:"+r-w"},{res:"bot.content",op:"+r+w"},{res:"module.qna",op:"+r+w"},{res:"module.nlu",op:"+r+w"},{res:"module.code-editor.*",op:"-r-w"}]}],t.defaultPipelines={none:[{id:"prod",label:"Production",action:"promote_copy"}],botpress:[{id:"dev",label:"Dev",action:"promote_copy"},{id:"review",label:"Review",action:"promote_copy"},{id:"prod",label:"Production",action:"promote_copy"}]},t.defaultWorkspace={id:"default",name:"Default",audience:"external",bots:[],roles:t.defaultRoles,defaultRole:t.defaultUserRole,adminRole:t.defaultAdminRole,pipeline:t.defaultPipelines.none,rolloutStrategy:"anonymous"},t.CHAT_USER_ROLE={id:"chatuser",name:"Chat User",description:"Chat users have limited access to bots.",rules:[{res:"*",op:"-r-w"},{res:"user.bots",op:"+r"}]}},246:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(1058)),s=n(a(1059)),o=["cpu.usage","mem.usage"],c=["requests.count","errors.count","warnings.count","eventsIn.count","eventsOut.count"];t.groupEntriesByTime=function(e,t){if(e&&e.length){var a=s.default(t),n=e[0].ts;return r.default.groupBy(e,function(e){return e.ts-n<=a?n:n=e.ts})}},t.mergeEntriesByTime=function(e,t){return r.default.values(r.default.mapValues(e,function(e,a){return i(e,a,t)}))};var i=function(e,t,a){var n={},s={},i=!0,l=!1,u=void 0;try{for(var d,m=function(){var t=d.value;n[t]=n[t]||{};var a=r.default.filter(e,function(e){return e.host===t});o.forEach(function(e){var o=r.default.sumBy(a,e);r.default.set(n[t],e,r.default.round(o/a.length,2)),r.default.set(s,e,r.default.get(s,e,0)+o)}),c.forEach(function(e){var o=r.default.sumBy(a,e);r.default.set(n[t],e,o),r.default.set(s,e,r.default.get(s,e,0)+o)})},p=a[Symbol.iterator]();!(i=(d=p.next()).done);i=!0)m()}catch(f){l=!0,u=f}finally{try{i||null==p.return||p.return()}finally{if(l)throw u}}return o.forEach(function(t){return r.default.set(s,t,r.default.round(r.default.get(s,t)/e.length,2))}),{ts:+t,hosts:n,summary:s}};t.calculateOverviewForHost=function(e){var t={};return o.forEach(function(a){return r.default.set(t,a,r.default.get(r.default.maxBy(e,a),a))}),c.forEach(function(a){return r.default.set(t,a,r.default.sumBy(e,a))}),t}},533:function(e,t){e.exports="data:image/png;base64,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"},534:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(412)),s=a(161);t.BOTID_REGEX=/^[A-Z0-9]+[A-Z0-9_-]{1,}[A-Z0-9]+$/i,t.WORKSPACEID_REGEX=/[A-Z0-9-_\/]/i,t.isValidBotId=function(e){return t.BOTID_REGEX.test(e)},t.BotCreationSchema=r.default.object().keys({id:r.default.string().regex(t.BOTID_REGEX).required(),name:r.default.string().max(50).allow("").optional(),category:r.default.string().allow(null),description:r.default.string().max(500).allow(""),pipeline_status:{current_stage:{promoted_by:r.default.string(),promoted_on:r.default.date(),id:r.default.string()}},locked:r.default.bool()}),t.BotEditSchema=r.default.object().keys({name:r.default.string().allow("").max(50),category:r.default.string().allow(null),description:r.default.string().max(500).allow(""),disabled:r.default.bool(),private:r.default.bool(),defaultLanguage:r.default.string().min(2).max(3),languages:r.default.array().items(r.default.string().min(2).max(3)),details:{website:r.default.string().uri().optional().allow(""),termsConditions:r.default.string().uri().optional().allow(""),privacyPolicy:r.default.string().uri().optional().allow(""),phoneNumber:r.default.string().max(20).optional().allow(""),emailAddress:r.default.string().email().optional().allow(""),avatarUrl:r.default.string().optional().allow(""),coverPictureUrl:r.default.string().optional().allow("")}}),t.WorkspaceCreationSchema=r.default.object().keys({id:r.default.string().regex(t.WORKSPACEID_REGEX).required(),name:r.default.string().max(50).required(),description:r.default.string().max(500).allow(""),audience:r.default.string().valid(["internal","external"]).default("external").required(),pipelineId:r.default.string().valid(Object.keys(s.defaultPipelines)).default("none")})},538:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourceMatches=function(e,t){var a=/[\/\.]/;(e=e||"").indexOf("*")<0&&(e+=".*");for(var n=e.split(a),r=t.split(a),s=!0,o=0;s&&o<n.length;o++)"*"!==n[o]&&(s=o<r.length&&n[o].toLowerCase()===r[o].toLowerCase());return s};var n={read:"r",write:"w"},r=["r","w"];t.checkRule=function(e,a,s){if(!e)return!1;if(a=a.toLowerCase(),a=n[a]||a,!r.includes(a))throw new Error("Invalid rule operation: ".concat(a));var o=!1,c=!0,i=!1,l=void 0;try{for(var u,d=e[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value,p=m.op;if(!p||p.length<2||p.length>4)throw new Error("Invalid rule operation: ".concat(p));t.resourceMatches(m.res,s)&&(4===p.length?o=p[1]===a?"+"===p[0]:p[3]===a&&"+"===p[2]:3===p.length?o="+"===p[0]:2===p.length&&p[1]===a&&(o="+"===p[0]))}}catch(f){i=!0,l=f}finally{try{c||null==d.return||d.return()}finally{if(i)throw l}}return o},t.checkMultipleRoles=function(e,a,n){if(!e)return!1;for(var r in e)if(t.checkRule(e[r],a,n))return!0;return!1}},541:function(e,t,a){e.exports=a.p+"static/media/loading-circle.eb332664.svg"},543:function(e,t,a){e.exports=a.p+"static/media/linux.f8aa693f.png"},544:function(e,t){e.exports="data:image/png;base64,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"},545:function(e,t){e.exports="data:image/png;base64,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"},556:function(e,t){e.exports="data:image/png;base64,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"},606:function(e,t,a){e.exports=a(1199)},786:function(e,t,a){},809:function(e,t){},811:function(e,t){},845:function(e,t){},846:function(e,t){}},[[606,1,2]]]);